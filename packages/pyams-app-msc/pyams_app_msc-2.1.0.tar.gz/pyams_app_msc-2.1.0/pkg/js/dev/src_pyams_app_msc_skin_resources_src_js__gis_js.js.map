{"version":3,"file":"src_pyams_app_msc_skin_resources_src_js__gis_js.js","mappings":"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","sources":["webpack://pyams_app_msc/./src/pyams_app_msc/skin/resources/src/js/_gis.js"],"sourcesContent":["import MyAMS from \"./_utils\";\n\n\nconst createMap = (map, config, options, callback) => {\n\n\treturn new Promise((resolve, reject) => {\n\n\t\tconst data = map.data();\n\t\tlet settings = {\n\t\t\tpreferCanvas: data.mapLeafletPreferCanvas || false,\n\t\t\tattributionControl: data.mapLeafletAttributionControl === undefined ?\n\t\t\t\tconfig.attributionControl : data.mapLeafletAttributionControl,\n\t\t\tzoomControl: data.mapLeafletZoomControl === undefined ?\n\t\t\t\tconfig.zoomControl : data.mapLeafletZoomControl,\n\t\t\tcrs: data.mapLeafletCrs || MyAMS.getObject(config.crs) || L.CRS.EPSG3857,\n\t\t\tcenter: data.mapLeafletCenter || config.center,\n\t\t\tzoom: data.mapLeafletZoom || config.zoom,\n\t\t\tgestureHandling: data.mapLeafletWheelZoom === undefined ?\n\t\t\t\t!config.scrollWheelZoom : data.mapLeafletWheelZoom,\n\t\t\tkeyboard: data.mapLeafletKeyboard === undefined ?\n\t\t\t\tconfig.keyboard && !L.Browser.mobile : data.amsLeafletKeyboard\n\t\t};\n\t\tsettings = $.extend({}, settings, options);\n\t\tmap.trigger('map.init', [map, settings, config]);\n\t\tconst\n\t\t\tleafmap = L.map(map.attr('id'), settings),\n\t\t\tlayersConfig = [];\n\t\tif (config.layers) {\n\t\t\tfor (const layerConfig of config.layers) {\n\t\t\t\tmap.trigger('map.layer.init', [map, layerConfig]);\n\t\t\t\tlayersConfig.push(PyAMS_GIS.getLayer(map, leafmap, layerConfig));\n\t\t\t}\n\t\t} else {\n\t\t\tlayersConfig.push(L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tid: 'osm',\n\t\t\t\tattribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n\t\t\t}));\n\t\t}\n\t\t$.when.apply($, layersConfig).then(function(...layers) {\n\t\t\tfor (const idx in layers) {\n\t\t\t\tlayers[idx].addTo(leafmap);\n\t\t\t}\n\t\t\tif (config.zoomControl && (data.mapLeafletHideZoomControl !== true)) {\n\t\t\t\tL.control.scale().addTo(leafmap);\n\t\t\t}\n\t\t\tif (config.center) {\n\t\t\t\tleafmap.setView(new L.LatLng(config.center.lat, config.center.lon),\n\t\t\t\t\tconfig.zoom || 13);\n\t\t\t} else if (config.bounds) {\n\t\t\t\tleafmap.fitBounds(config.bounds);\n\t\t\t}\n\t\t\tif (config.marker) {\n\t\t\t\tconst icon = L.icon({\n\t\t\t\t\ticonUrl: '/--static--/pyams_gis/img/marker-icon.png',\n\t\t\t\t\ticonSize: [25, 41],\n\t\t\t\t\ticonAnchor: [12, 39]\n\t\t\t\t});\n\t\t\t\tconst marker = L.marker();\n\t\t\t\tmarker.setIcon(icon);\n\t\t\t\tmarker.setLatLng({\n\t\t\t\t\tlon: config.marker.lon,\n\t\t\t\t\tlat: config.marker.lat\n\t\t\t\t});\n\t\t\t\tmarker.addTo(leafmap);\n\t\t\t}\n\t\t\tmap.data('leafmap', leafmap);\n\t\t\tmap.data('leafmap.config', config);\n\t\t\tmap.trigger('map.finishing', [map, leafmap, config]);\n\t\t\tif (callback) {\n\t\t\t\tcallback(leafmap, config);\n\t\t\t}\n\t\t\tmap.trigger('map.finished', [map, leafmap, config]);\n\t\t\tresolve(leafmap);\n\t\t});\n\t});\n};\n\n\nconst PyAMS_GIS = {\n\n\t/**\n\t * Map initialization\n\t *\n\t * @param maps: maps elements\n\t * @param options: optional maps configuration settings\n\t * @param callback: maps initialization callback\n\t */\n\tinit: (maps, options, callback) => {\n\n\t\twindow.PyAMS_GIS = PyAMS_GIS;\n\t\tPromise.all([\n\t\t\timport('leaflet'),\n\t\t\timport('leaflet-gesture-handling'),\n\t\t\timport(\"../../../../../../node_modules/leaflet/dist/leaflet.css\"),\n\t\t\timport(\"../../../../../../node_modules/leaflet-gesture-handling/dist/leaflet-gesture-handling.css\")\n\t\t]).then(() => {\n\t\t\tconst $maps = $.map(maps, (elt) => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tconst\n\t\t\t\t\t\tmap = $(elt),\n\t\t\t\t\t\tdata = map.data(),\n\t\t\t\t\t\tconfig = data.mapConfiguration;\n\t\t\t\t\tif (config) {\n\t\t\t\t\t\tresolve(createMap(map, config, options, callback));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$.get(data.mapConfigurationUrl || 'get-map-configuration.json', (config) => {\n\t\t\t\t\t\t\tresolve(createMap(map, config, options, callback));\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\t$.when.apply($, $maps).then();\n\t\t});\n\t},\n\n\t/**\n\t * Get layer definition\n\t *\n\t * @param map: source map element\n\t * @param leafmap: current Leaflet map\n\t * @param layer: current layer definition\n\t */\n\tgetLayer: (map, leafmap, layer) => {\n\t\tconst factory = MyAMS.getObject(layer.factory);\n\t\tif (factory !== undefined) {\n\t\t\tdelete layer.factory;\n\t\t\tconst deferred = [];\n\t\t\tif (layer.dependsOn) {\n\t\t\t\tfor (const name in layer.dependsOn) {\n\t\t\t\t\tif (!layer.dependsOn.hasOwnProperty(name)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (MyAMS.getObject(name) === undefined) {\n\t\t\t\t\t\tdeferred.push(MyAMS.getScript(layer.dependsOn[name]));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdelete layer.dependsOn;\n\t\t\t}\n\t\t\tif (deferred.length > 0) {\n\t\t\t\t$.when.apply($, deferred);\n\t\t\t}\n\t\t\treturn factory(map, leafmap, layer);\n\t\t}\n\t},\n\n\t/**\n\t * Layers factories\n\t */\n\tfactory: {\n\n\t\tGeoJSON: (map, leafmap, layer) => {\n\t\t\tconst url = layer.url;\n\t\t\tdelete layer.url;\n\t\t\tconst result = L.geoJSON(null, layer);\n\t\t\tmap.on('map.finished', (evt, map, leafmap, config) => {\n\t\t\t\t$.get(url, (data) => {\n\t\t\t\t\tresult.addData(data.geometry, {\n\t\t\t\t\t\tstyle: layer.style\n\t\t\t\t\t});\n\t\t\t\t\tif (config.fitLayer === layer.name) {\n\t\t\t\t\t\tleafmap.fitBounds(result.getBounds());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn result;\n\t\t},\n\n\t\tTileLayer: (map, leafmap, layer) => {\n\t\t\tconst url = layer.url;\n\t\t\tdelete layer.url;\n\t\t\treturn L.tileLayer(url, layer);\n\t\t},\n\n\t\tWMS: function(map, leafmap, layer) {\n\t\t\tconst url = layer.url;\n\t\t\tdelete layer.url;\n\t\t\treturn L.tileLayer.wms(url, layer);\n\t\t},\n\n\t\tGeoportal: {\n\t\t\tWMS: (map, leafmap, layer) => {\n\t\t\t\tMyAMS.getCSS('/--static--/pyams_gis/css/leaflet-gp-3.0.2.min.css', 'geoportal');\n\t\t\t\treturn L.geoportalLayer.WMS(layer);\n\t\t\t}\n\t\t},\n\n\t\tESRI: {\n\t\t\tFeature: (map, leafmap, layer) => {\n\t\t\t\treturn L.esri.featureLayer(layer);\n\t\t\t}\n\t\t},\n\n\t\tGoogle: (map, leafmap, layer) => {\n\t\t\tconst apiKey = layer.apiKey;\n\t\t\tdelete layer.apiKey;\n\t\t\tif (MyAMS.getObject('window.google.maps') === undefined) {\n\t\t\t\tconst script = MyAMS.getScript('https://maps.googleapis.com/maps/api/js?key=' + apiKey);\n\t\t\t\t$.when.apply($, [script]);\n\t\t\t}\n\t\t\treturn L.gridLayer.googleMutant(layer);\n\t\t}\n\t}\n};\n\nexport default PyAMS_GIS;\n"],"names":["MyAMS","createMap","map","config","options","callback","Promise","resolve","reject","data","settings","preferCanvas","mapLeafletPreferCanvas","attributionControl","mapLeafletAttributionControl","undefined","zoomControl","mapLeafletZoomControl","crs","mapLeafletCrs","getObject","L","CRS","EPSG3857","center","mapLeafletCenter","zoom","mapLeafletZoom","gestureHandling","mapLeafletWheelZoom","scrollWheelZoom","keyboard","mapLeafletKeyboard","Browser","mobile","amsLeafletKeyboard","$","extend","trigger","leafmap","attr","layersConfig","layers","_iterator","_createForOfIteratorHelper","_step","s","n","done","layerConfig","value","push","PyAMS_GIS","getLayer","err","e","f","tileLayer","maxZoom","id","attribution","when","apply","then","_len","arguments","length","Array","_key","idx","addTo","mapLeafletHideZoomControl","control","scale","setView","LatLng","lat","lon","bounds","fitBounds","marker","icon","iconUrl","iconSize","iconAnchor","setIcon","setLatLng","init","maps","window","all","$maps","elt","mapConfiguration","get","mapConfigurationUrl","layer","factory","deferred","dependsOn","name","hasOwnProperty","getScript","GeoJSON","url","result","geoJSON","on","evt","addData","geometry","style","fitLayer","getBounds","TileLayer","WMS","wms","Geoportal","getCSS","geoportalLayer","ESRI","Feature","esri","featureLayer","Google","apiKey","script","gridLayer","googleMutant"],"sourceRoot":""}