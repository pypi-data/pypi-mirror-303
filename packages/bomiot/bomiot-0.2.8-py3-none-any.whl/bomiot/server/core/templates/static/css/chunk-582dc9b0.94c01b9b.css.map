{"version":3,"sources":["webpack:///src/views/project/src/views/project/Web.vue","chunk-582dc9b0.94c01b9b.css","webpack:///src/views/project/Parser.vue","webpack:///src/components/CodeEditor.vue","webpack:///src/views/project/Configure.vue"],"names":[],"mappings":"AAmNA,6BACA,cCjNA,CCmYA,SACE,WAAA,CACA,wBAAA,CACA,WACE,cAAA,CACA,iBAAA,CACA,kBACE,gBAAA,CAEF,aACE,aAAA,CACA,eAAA,CAIF,0BACE,UAAA,CAOJ,iDAEE,wBAAA,CACA,iBAAA,CACA,gBALW,CAMX,mFACE,cAAA,CAIF,oCACE,+BAAA,CACA,yCACE,SAAA,CAEF,2CACE,SAAA,CAKJ,0CACE,iBAAA,CACA,WAAA,CACA,gBAAA,CACA,gBAAA,CACA,eAAA,CACA,kBAAA,CACA,sBAAA,CACA,cAAA,CACA,+BAAA,CAKF,4BACE,wBAAA,CACA,gBAAA,CAIJ,sBACE,gBAAA,CACA,eAAA,CACA,wBAAA,CACA,YAAA,CAIJ,yBACE,uBAAA,CAGF,qBACE,kCAAA,CCvVF,aACE,cAAA,CACA,yBACE,gBAAA,CAEF,8BACE,WAAA,CACA,0BAAA,CCwPA,0GACE,iBAAA,CAKA,gDACE,eAAA,CAMR,QACE,oBAAA,CACA,cACE,yBAAA,CAEF,eACE,yBAAA,CAEF,aACE,yBAAA,CAIJ,MACE,cAAA,CACA,UAAA,CACA,WAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CACA,YAAA,CACA,cAAA,CACA,iBAAA","file":"chunk-582dc9b0.94c01b9b.css","sourcesContent":["<template>\n  <div>\n    <el-row class=\"m-b-sm\">\n      <el-col :span=\"3\">\n        <el-button type=\"primary\" size=\"mini\">XPath Selector</el-button>\n      </el-col>\n      <el-col :span=\"18\">\n        {{ xpathSelector }}\n      </el-col>\n      <el-col :span=\"1\">\n        <el-button\n          type=\"primary\"\n          size=\"mini\"\n          v-clipboard:copy=\"xpathSelector\"\n          v-clipboard:success=\"onCopy\"\n          v-clipboard:error=\"onError\"\n          >{{ $lang.buttons.copy }}\n        </el-button>\n      </el-col>\n    </el-row>\n    <el-row class=\"m-b-md\">\n      <el-col :span=\"3\">\n        <el-button type=\"primary\" size=\"mini\">CSS Selector</el-button>\n      </el-col>\n      <el-col :span=\"18\">\n        {{ cssSelector }}\n      </el-col>\n      <el-col :span=\"1\">\n        <el-button\n          type=\"primary\"\n          size=\"mini\"\n          v-clipboard:copy=\"cssSelector\"\n          v-clipboard:success=\"onCopy\"\n          v-clipboard:error=\"onError\"\n          >{{ $lang.buttons.copy }}\n        </el-button>\n      </el-col>\n    </el-row>\n    <iframe\n      sandbox=\"allow-same-origin allow-scripts\"\n      scrolling=\"yes\"\n      width=\"100%\"\n      :srcdoc=\"html\"\n      class=\"iframe-box\"\n      id=\"iframe-box\"\n      frameborder=\"0\"\n    ></iframe>\n  </div>\n</template>\n<script>\nimport $ from \"jquery\";\n\n$.fn.extend({\n  getCSSSelector: function() {\n    var path,\n      node = this;\n    while (node.length) {\n      var realNode = node[0],\n        name = realNode.localName;\n      var classes = $(realNode).attr(\"class\");\n      var cls = \"\";\n      if (classes) {\n        classes = classes.split(\" \");\n        for (let i = 0; i < classes.length; i++) {\n          if (classes[i]) {\n            cls += \".\" + classes[i];\n          }\n        }\n      }\n\n      if (!name) break;\n      name = name.toLowerCase();\n\n      if (cls) {\n        name = name + cls;\n      }\n\n      var parent = node.parent();\n\n      var sameTagSiblings = parent.children(name);\n      if (sameTagSiblings.length > 1) {\n        var allSiblings = parent.children();\n        var index = allSiblings.index(realNode) + 1;\n        if (index > 1) {\n          name += \":nth-child(\" + index + \")\";\n        }\n      }\n\n      if (name !== \"html\" && name !== \"body\") {\n        path = name + (path ? \" > \" + path : \"\");\n      }\n      node = parent;\n    }\n    return path;\n  },\n  getXPathSelector: function() {\n    var path,\n      node = this;\n    if (node.id) return \"//*[@id='\" + node.id + \"']\";\n    var position,\n      $node = this.first(),\n      nodeName = $node.prop(\"nodeName\"),\n      $sibSameNameAndSelf = $node.siblings(nodeName).addBack(),\n      steps = [],\n      $parent = $node.parent(),\n      parentName = $parent.prop(\"nodeName\");\n\n    position =\n      $sibSameNameAndSelf.length > 1\n        ? \"[\" + ($sibSameNameAndSelf.index($node) + 1) + \"]\"\n        : \"\";\n    steps.push(nodeName + position);\n\n    while (\n      $parent.length == 1 &&\n      parentName !== node &&\n      parentName.toLowerCase() !== \"#document\" &&\n      parentName.toLowerCase() !== \"html\" &&\n      parentName.toLowerCase() !== \"body\"\n    ) {\n      $sibSameNameAndSelf = $parent.siblings(parentName).addBack();\n      position =\n        $sibSameNameAndSelf.length > 1\n          ? \"[\" + ($sibSameNameAndSelf.index($parent) + 1) + \"]\"\n          : \"\";\n      steps.push(parentName + position);\n      $parent = $parent.parent();\n      parentName = $parent.prop(\"nodeName\");\n    }\n    return (\n      \"//\" +\n      steps\n        .reverse()\n        .join(\"/\")\n        .toLowerCase()\n    );\n  },\n});\n\nfunction getCSSSelector(element) {\n  return $(element).getCSSSelector();\n}\n\nfunction getXPathSelector(element) {\n  return $(element).getXPathSelector();\n}\n\nexport default {\n  name: \"Web\",\n  data() {\n    return {\n      xpathSelector: null,\n      cssSelector: null,\n    };\n  },\n  props: {\n    html: {\n      type: String,\n    },\n  },\n  methods: {\n    onCopy: function() {\n      this.$message.success(this.$store.getters.$lang.messages.successCopy);\n    },\n    onError: function() {\n      this.$message.error(this.$store.getters.$lang.messages.errorCopy);\n    },\n  },\n  mounted() {\n    let that = this;\n    let iframe_id = \"iframe-box\";\n    $(\"#\" + iframe_id).on(\"load\", function() {\n      document.getElementById(\n        iframe_id\n      ).contentWindow.document.body.onclick = function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        let target = $(event.target);\n        console.log(getCSSSelector(target));\n        that.cssSelector = getCSSSelector(target);\n        that.xpathSelector = getXPathSelector(target);\n\n        $(document.getElementById(iframe_id).contentWindow.document.body)\n          .find(\".gerapy-selected\")\n          .remove();\n        $(document.getElementById(iframe_id).contentWindow.document.body)\n          .find(getCSSSelector(target))\n          .each(function() {\n            $(\"<div></div>\")\n              .css($(this).offset())\n              .css({\n                width: target.width(),\n                height: target.height(),\n                position: \"absolute\",\n                border: \"2px solid red\",\n                \"pointer-events\": \"none\",\n                \"z-index\": 10000,\n              })\n              .addClass(\"gerapy-selected\")\n              .appendTo(\n                $(\n                  document.getElementById(iframe_id).contentWindow.document.body\n                )\n              );\n          });\n      };\n    });\n  },\n};\n</script>\n<style scoped>\niframe html {\n  cursor: pointer;\n}\n</style>\n","\niframe html[data-v-0f01bba5] {\n  cursor: pointer;\n}\n\n#console{height:auto;border:1px solid #dfe6ec}#console p{margin-top:5px;margin-bottom:5px}#console p button{margin-right:5px}#console p a{color:#48576a;font-weight:400}#console label .el-button{width:100%}#follows #follow-requests,#follows #follow-items{border:1px solid #dfe6ec;overflow-y:scroll;max-height:400px}#follows #follow-requests .el-loading-mask,#follows #follow-items .el-loading-mask{height:10000px}#follows #follow-items .follow-item{border-bottom:1px solid #dfe6ec}#follows #follow-items .follow-item .key{width:10%}#follows #follow-items .follow-item .value{width:90%}#follows #follow-requests .follow-request{position:relative;height:40px;line-height:40px;padding-left:5px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;cursor:pointer;border-bottom:1px solid #dfe6ec}#follows #follow-web iframe{border:1px solid #dfe6ec;min-height:500px}#follows #follow-html{max-height:500px;overflow:scroll;border:1px solid #dfe6ec;padding:15px}.el-tabs__item.is-active{color:#28ccaa !important}.el-tabs__active-bar{background-color:#28ccaa !important}\n.code-editor{font-size:16px}.code-editor .CodeMirror{max-height:200px}.code-editor .CodeMirror-line{height:25px;line-height:25px !important}\n#project-configure #info .el-form,#project-configure #items .el-form,#project-configure #spiders .el-form{padding:20px 30px}#project-configure #info .el-form .el-form-item{margin-bottom:0}.inline{display:inline-block}.inline.short{max-width:100px !important}.inline.medium{max-width:200px !important}.inline.long{max-width:400px !important}#save{position:fixed;width:40px;height:40px;border-radius:50%;right:20px;bottom:20px;z-index:1000;font-size:12px;padding-left:15px}\n\n/*# sourceMappingURL=chunk-582dc9b0.94c01b9b.css.map*/","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#console {\n  height: auto;\n  border: 1px solid rgb(223, 230, 236);\n  p {\n    margin-top: 5px;\n    margin-bottom: 5px;\n    button {\n      margin-right: 5px;\n    }\n    a {\n      color: rgb(72, 87, 106);\n      font-weight: 400;\n    }\n  }\n  label {\n    .el-button {\n      width: 100%;\n    }\n  }\n}\n\n#follows {\n  $max-height: 400px;\n  #follow-requests,\n  #follow-items {\n    border: 1px solid rgb(223, 230, 236);\n    overflow-y: scroll;\n    max-height: $max-height;\n    .el-loading-mask {\n      height: 10000px;\n    }\n  }\n  #follow-items {\n    .follow-item {\n      border-bottom: 1px solid rgb(223, 230, 236);\n      .key {\n        width: 10%;\n      }\n      .value {\n        width: 90%;\n      }\n    }\n  }\n  #follow-requests {\n    .follow-request {\n      position: relative;\n      height: 40px;\n      line-height: 40px;\n      padding-left: 5px;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      cursor: pointer;\n      border-bottom: 1px solid rgb(223, 230, 236);\n    }\n  }\n\n  #follow-web {\n    iframe {\n      border: 1px solid #dfe6ec;\n      min-height: 500px;\n    }\n  }\n\n  #follow-html {\n    max-height: 500px;\n    overflow: scroll;\n    border: 1px solid #dfe6ec;\n    padding: 15px;\n  }\n}\n\n.el-tabs__item.is-active {\n  color: #28ccaa !important;\n}\n\n.el-tabs__active-bar {\n  background-color: #28ccaa !important;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n$line-height: 25px;\n.code-editor {\n  font-size: 16px;\n  .CodeMirror {\n    max-height: 200px;\n  }\n  .CodeMirror-line {\n    height: $line-height;\n    line-height: $line-height !important;\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#project-configure {\n  #info,\n  #items,\n  #spiders {\n    .el-form {\n      padding: 20px 30px;\n    }\n  }\n  #info {\n    .el-form {\n      .el-form-item {\n        margin-bottom: 0;\n      }\n    }\n  }\n}\n\n.inline {\n  display: inline-block;\n  &.short {\n    max-width: 100px !important;\n  }\n  &.medium {\n    max-width: 200px !important;\n  }\n  &.long {\n    max-width: 400px !important;\n  }\n}\n\n#save {\n  position: fixed;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  right: 20px;\n  bottom: 20px;\n  z-index: 1000;\n  font-size: 12px;\n  padding-left: 15px;\n}\n"]}