import{$ as e,r as s,a0 as a,a1 as t,a2 as o,j as n,P as r,a3 as i,a4 as l,a5 as d,a6 as c,a7 as m,a8 as h,h as x,a9 as b,aa as p,ab as j,ac as u,y as f,ad as y,ae as k,af as g}from"./index-B0HXCvCK.js";import{R as w,u as v,A as N,a as C,C as I}from"./useMarimoWebSocket-TTtaOQWw.js";const T=({appConfig:i})=>{const{setCells:l}=e();s.useEffect((()=>(w.INSTANCE.start(a),()=>{w.INSTANCE.stop()})),[]);const{connection:d}=v({autoInstantiate:!0,setCells:l,sessionId:r()}),c=t(o);return n.jsxs(N,{connectionState:d.state,isRunning:c,width:i.width,children:[n.jsx(C,{connection:d,className:"sm:pt-8"}),n.jsx(I,{appConfig:i,mode:"read"})]})},A=()=>{if(!i())return null;const e=l();return e?n.jsxs("div",{className:"px-4 py-2 bg-[var(--sky-2)] border-b border-[var(--sky-7)] text-md text-[var(--sky-11)] font-semibold flex justify-between items-center gap-4 no-print",children:[n.jsxs("span",{children:["This is a static Python notebook built using"," ",n.jsx("a",{href:"https://github.com/marimo-team/marimo",target:"_blank",className:"underline",rel:"noreferrer",children:"marimo"}),".",n.jsx("br",{}),"Some interactive features may not work, see ways to run or edit this."]}),n.jsx("span",{className:"flex-shrink-0",children:n.jsx(S,{code:e})})]}):null},S=({code:e})=>{let s=d()||"notebook.py";const a=s.lastIndexOf("/");-1!==a&&(s=s.slice(a+1));const t=window.location.href,o=c({code:e});return n.jsxs(m,{children:[n.jsx(h,{asChild:!0,children:n.jsx(x,{"data-testid":"static-notebook-dialog-trigger",variant:"secondary",children:"Run or edit this notebook"})}),n.jsxs(b,{children:[n.jsxs(p,{children:[n.jsx(j,{children:s}),n.jsxs(u,{className:"pt-4 text-md text-left",children:["This is a static notebook built using"," ",n.jsx("a",{href:"https://github.com/marimo-team/marimo",target:"_blank",className:"text-link hover:underline",rel:"noreferrer",children:"marimo"}),". marimo is an open-source next-generation Python notebook.",n.jsx("hr",{className:"my-3"}),"In order to edit this notebook, you will need to download the code locally, install marimo, and run the following in your terminal:",n.jsxs("div",{className:"font-mono text-sm bg-[var(--sky-2)] rounded-md my-3 p-2 border border-[var(--sky-7)]",children:["pip install marimo",n.jsx("br",{}),"marimo edit ",s]}),!t.endsWith(".html")&&n.jsxs(n.Fragment,{children:["or",n.jsxs("div",{className:"font-mono text-sm bg-[var(--sky-2)] rounded-md my-3 p-2 border border-[var(--sky-7)] break-all",children:["marimo edit ",window.location.href]})]}),n.jsx("hr",{className:"my-3"}),"You may also be able to run this notebook entirely in the browser via WebAssembly at:"," ",n.jsxs("a",{href:o,target:"_blank",className:"text-link hover:underline",rel:"noreferrer",children:[o.slice(0,40),"..."]}),n.jsx("br",{}),n.jsxs("div",{className:"text-sm text-muted-foreground pt-2",children:[n.jsx("strong",{children:"Note:"})," This feature is experimental and may not work for all notebooks. Additionally, some dependencies may not be available in the browser."]})]})]}),n.jsxs("div",{className:"flex gap-4 flex-wrap",children:[n.jsxs(x,{"data-testid":"copy-static-notebook-dialog-button",variant:"secondary",onClick:()=>{window.navigator.clipboard.writeText(e),f({title:"Copied to clipboard"})},children:[n.jsx(y,{className:"w-4 h-4 mr-1"}),"Copy code"]}),n.jsxs(x,{"data-testid":"download-static-notebook-dialog-button",variant:"secondary",onClick:()=>{k(new Blob([e],{type:"text/plain"}),s)},children:[n.jsx(g,{className:"w-4 h-4 mr-1"}),"Download code"]})]})]})]})},_=e=>n.jsxs(n.Fragment,{children:[n.jsx(A,{}),n.jsx(T,{appConfig:e.appConfig})]});export{_ as default};
