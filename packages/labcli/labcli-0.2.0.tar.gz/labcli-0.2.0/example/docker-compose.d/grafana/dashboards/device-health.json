{
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "grafana",
            "uid": "-- Grafana --"
          },
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "type": "dashboard"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "P982945308D3682D1"
          },
          "enable": true,
          "expr": "{device=\"$device\"} |~ \"Enter configuration|Configured from\"",
          "filter": {
            "exclude": false,
            "ids": [
              5,
              20,
              10,
              11,
              17
            ]
          },
          "iconColor": "blue",
          "instant": false,
          "name": "Device Config Push"
        },
        {
          "datasource": {
            "type": "loki",
            "uid": "P982945308D3682D1"
          },
          "enable": true,
          "expr": "{device=\"$device\"} |~ \"Line protocol on Interface\"",
          "filter": {
            "exclude": false,
            "ids": [
              20,
              11,
              17
            ]
          },
          "iconColor": "red",
          "instant": false,
          "name": "Interface Flap"
        }
      ]
    },
    "description": "Overview of a device health status. It includes resources, interfaces and BGP information if available.",
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 1,
    "id": 1,
    "links": [],
    "liveNow": false,
    "panels": [
      {
        "datasource": {
          "type": "fifemon-graphql-datasource",
          "uid": "P6F0309FEA1DB13F7"
        },
        "description": "Device Detailed Information from Nautobot",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "auto",
              "cellOptions": {
                "type": "auto"
              },
              "filterable": false,
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "id"
              },
              "properties": [
                {
                  "id": "custom.hidden",
                  "value": true
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Hostname"
              },
              "properties": [
                {
                  "id": "links",
                  "value": [
                    {
                      "targetBlank": true,
                      "title": "Nautobot Detail",
                      "url": "http://network-observability.lab:8080/dcim/devices/${__data.fields.id}"
                    }
                  ]
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Intended State"
              },
              "properties": [
                {
                  "id": "mappings",
                  "value": [
                    {
                      "options": {
                        "Active": {
                          "color": "light-green",
                          "index": 1,
                          "text": "Active"
                        },
                        "Retired": {
                          "color": "light-red",
                          "index": 2,
                          "text": "Retired"
                        },
                        "lab-active": {
                          "color": "light-green",
                          "index": 0,
                          "text": "Active"
                        }
                      },
                      "type": "value"
                    }
                  ]
                },
                {
                  "id": "custom.cellOptions",
                  "value": {
                    "mode": "basic",
                    "type": "color-background"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 4,
          "w": 18,
          "x": 0,
          "y": 0
        },
        "id": 7,
        "options": {
          "cellHeight": "sm",
          "footer": {
            "countRows": false,
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true
        },
        "pluginVersion": "10.2.3",
        "targets": [
          {
            "aliasBy": "",
            "annotationTags": "",
            "annotationText": "",
            "annotationTitle": "",
            "constant": 6.5,
            "dataPath": "devices",
            "datasource": {
              "type": "fifemon-graphql-datasource",
              "uid": "P6F0309FEA1DB13F7"
            },
            "endTimePath": "endTime",
            "groupBy": "",
            "queryText": "query {\n  devices(name: \"$device\") {\n    id\n    name\n    role {\n      name\n    }\n    device_type {\n      manufacturer {\n        name\n      }\n      model\n    }\n    status {\n      name\n    }\n  }\n}",
            "refId": "A",
            "timePath": ""
          }
        ],
        "title": "Device Details",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {
                "id": false
              },
              "includeByName": {},
              "indexByName": {},
              "renameByName": {
                "device_type.manufacturer.name": "Manufacturer",
                "device_type.model": "Model",
                "id": "",
                "name": "Hostname",
                "role.name": "Role",
                "status.name": "Intended State"
              }
            }
          }
        ],
        "type": "table"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "description": "Device overall state from a ping result",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "0": {
                    "color": "light-green",
                    "index": 0,
                    "text": "UP"
                  },
                  "1": {
                    "color": "light-red",
                    "index": 1,
                    "text": "DOWN"
                  },
                  "2": {
                    "color": "light-purple",
                    "index": 2,
                    "text": "PING ERROR"
                  }
                },
                "type": "value"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 3,
          "x": 18,
          "y": 0
        },
        "id": 1,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "10.2.3",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "disableTextWrap": false,
            "editorMode": "builder",
            "expr": "ping_result_code{device=\"$device\"}",
            "fullMetaSearch": false,
            "includeNullMetadata": true,
            "instant": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "A",
            "useBackend": false
          }
        ],
        "title": "State",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "description": "Device Uptime based on SNMP metric",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "light-blue",
                  "value": null
                }
              ]
            },
            "unit": "timeticks"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 3,
          "x": 21,
          "y": 0
        },
        "id": 2,
        "options": {
          "colorMode": "value",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "10.2.3",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "disableTextWrap": false,
            "editorMode": "builder",
            "expr": "device_uptime{device=\"$device\"}",
            "fullMetaSearch": false,
            "includeNullMetadata": true,
            "instant": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "A",
            "useBackend": false
          }
        ],
        "title": "Uptime",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "description": "Overall Memory average usage for the device",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 6,
          "x": 0,
          "y": 4
        },
        "id": 4,
        "options": {
          "minVizHeight": 200,
          "minVizWidth": 200,
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showThresholdLabels": false,
          "showThresholdMarkers": true,
          "sizing": "auto"
        },
        "pluginVersion": "10.2.3",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "disableTextWrap": false,
            "editorMode": "code",
            "expr": "(memory_used{device=\"$device\"} * 100) / (memory_used{device=\"$device\"} + memory_available{device=\"$device\"})",
            "fullMetaSearch": false,
            "includeNullMetadata": true,
            "instant": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "A",
            "useBackend": false
          }
        ],
        "title": "Avg Mem",
        "type": "gauge"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "description": "Overall CPU average usage for the device",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 6,
          "x": 6,
          "y": 4
        },
        "id": 3,
        "options": {
          "minVizHeight": 200,
          "minVizWidth": 200,
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showThresholdLabels": false,
          "showThresholdMarkers": true,
          "sizing": "auto"
        },
        "pluginVersion": "10.2.3",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "disableTextWrap": false,
            "editorMode": "code",
            "expr": "avg(avg_over_time(cpu_used{device=\"$device\"}[2m]))",
            "fullMetaSearch": false,
            "includeNullMetadata": true,
            "instant": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "A",
            "useBackend": false
          }
        ],
        "title": "Avg CPU",
        "type": "gauge"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "description": "Average Latency of a device",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 5
                }
              ]
            },
            "unit": "s"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 12,
          "x": 12,
          "y": 4
        },
        "id": 6,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "10.2.3",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "editorMode": "code",
            "expr": "ping_average_response_ms{device=\"$device\"}",
            "instant": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Latency",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "description": "CPU and Memory usage in average for available cores on the device",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": true,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 12,
          "x": 0,
          "y": 8
        },
        "id": 10,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "editorMode": "code",
            "expr": "avg(avg_over_time(cpu_used{device=\"$device\"}[2m]))",
            "instant": false,
            "legendFormat": "CPU Usage",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "editorMode": "code",
            "expr": "avg((memory_used{device=\"$device\"} * 100) / (memory_used{device=\"$device\"} + memory_available{device=\"$device\"}))",
            "hide": false,
            "instant": false,
            "legendFormat": "Memory Usage",
            "range": true,
            "refId": "B"
          }
        ],
        "title": "CPU & Mem Usage (Avg)",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "description": "Total Inbound + Outbound traffic on a device",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "light-blue",
                  "value": null
                }
              ]
            },
            "unit": "bps"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 12,
          "x": 12,
          "y": 8
        },
        "id": 5,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "10.2.3",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "editorMode": "code",
            "expr": "sum(rate(interface_in_octets{device=\"$device\"}[2m]) * 8 + rate(interface_out_octets{device=\"$device\"}[2m]) * 8)",
            "instant": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Bandwidth Usage",
        "type": "stat"
      },
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 13
        },
        "id": 9,
        "panels": [],
        "title": "Interfaces Information",
        "type": "row"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "description": "Interfaces State change over time",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "fixed"
            },
            "custom": {
              "fillOpacity": 70,
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineWidth": 0,
              "spanNulls": false
            },
            "mappings": [
              {
                "options": {
                  "1": {
                    "color": "light-green",
                    "index": 0,
                    "text": "UP"
                  },
                  "2": {
                    "color": "light-red",
                    "index": 1,
                    "text": "DOWN"
                  },
                  "3": {
                    "color": "light-blue",
                    "index": 2,
                    "text": "TESTING"
                  },
                  "4": {
                    "color": "light-purple",
                    "index": 3,
                    "text": "UNKNOWN"
                  },
                  "5": {
                    "color": "light-orange",
                    "index": 4,
                    "text": "DORMANT"
                  },
                  "6": {
                    "color": "light-orange",
                    "index": 5,
                    "text": "NOT PRESENT"
                  },
                  "7": {
                    "color": "light-orange",
                    "index": 6,
                    "text": "LOWER LAYER DOWN"
                  }
                },
                "type": "value"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 7,
          "w": 24,
          "x": 0,
          "y": 14
        },
        "id": 11,
        "options": {
          "alignValue": "left",
          "legend": {
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "mergeValues": true,
          "rowHeight": 0.9,
          "showValue": "auto",
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "interface_oper_status{device=\"$device\"}",
            "instant": false,
            "interval": "",
            "legendFormat": "{{name}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Interfaces State",
        "type": "state-timeline"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "description": "Total Interfaces Down",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "noValue": "0",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "light-red",
                  "value": null
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 0,
          "y": 21
        },
        "id": 13,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "10.2.3",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "count(interface_oper_status{device=\"$device\"} == 2)",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Down",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "datasource",
          "uid": "-- Mixed --"
        },
        "description": "Interfaces Detail table collected from the device",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "fixed"
            },
            "custom": {
              "align": "center",
              "cellOptions": {
                "type": "auto"
              },
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "none"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Traffic"
              },
              "properties": [
                {
                  "id": "custom.cellOptions",
                  "value": {
                    "mode": "lcd",
                    "type": "gauge",
                    "valueDisplayMode": "text"
                  }
                },
                {
                  "id": "color",
                  "value": {
                    "mode": "continuous-GrYlRd"
                  }
                },
                {
                  "id": "unit",
                  "value": "bps"
                },
                {
                  "id": "noValue",
                  "value": "N/A"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Oper State"
              },
              "properties": [
                {
                  "id": "custom.cellOptions",
                  "value": {
                    "type": "color-background"
                  }
                },
                {
                  "id": "mappings",
                  "value": [
                    {
                      "options": {
                        "1": {
                          "color": "light-green",
                          "index": 0,
                          "text": "UP"
                        },
                        "2": {
                          "color": "light-red",
                          "index": 1,
                          "text": "DOWN"
                        },
                        "3": {
                          "color": "light-blue",
                          "index": 2,
                          "text": "TESTING"
                        },
                        "4": {
                          "color": "light-purple",
                          "index": 3,
                          "text": "UNKNOWN"
                        },
                        "5": {
                          "color": "light-orange",
                          "index": 4,
                          "text": "DORMANT"
                        },
                        "6": {
                          "color": "light-orange",
                          "index": 5,
                          "text": "NOT PRESENT"
                        },
                        "7": {
                          "color": "light-orange",
                          "index": 6,
                          "text": "LOWER LAYER DOWN"
                        }
                      },
                      "type": "value"
                    }
                  ]
                },
                {
                  "id": "noValue",
                  "value": "NO DATA"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Enabled"
              },
              "properties": [
                {
                  "id": "custom.cellOptions",
                  "value": {
                    "type": "color-background"
                  }
                },
                {
                  "id": "mappings",
                  "value": [
                    {
                      "options": {
                        "1": {
                          "color": "light-green",
                          "index": 0,
                          "text": "TRUE"
                        },
                        "2": {
                          "color": "light-red",
                          "index": 1,
                          "text": "FALSE"
                        },
                        "3": {
                          "color": "light-blue",
                          "index": 2,
                          "text": "TESTING"
                        }
                      },
                      "type": "value"
                    }
                  ]
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Intended State"
              },
              "properties": [
                {
                  "id": "custom.cellOptions",
                  "value": {
                    "type": "color-background"
                  }
                },
                {
                  "id": "mappings",
                  "value": [
                    {
                      "options": {
                        "lab-active": {
                          "color": "light-blue",
                          "index": 0,
                          "text": "Active"
                        },
                        "lab-suspended": {
                          "color": "#8e948e",
                          "index": 1,
                          "text": "Suspended"
                        }
                      },
                      "type": "value"
                    }
                  ]
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 6,
          "w": 20,
          "x": 4,
          "y": 21
        },
        "id": 14,
        "options": {
          "cellHeight": "sm",
          "footer": {
            "countRows": false,
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "frameIndex": 1,
          "showHeader": true
        },
        "pluginVersion": "10.2.3",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "rate(interface_in_octets{device=\"$device\"}[2m]) * 8 + rate(interface_out_octets{device=\"$device\"}[2m]) * 8",
            "format": "table",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "interface_oper_status{device=\"$device\"}",
            "format": "table",
            "hide": false,
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "B"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "interface_admin_status{device=\"$device\"}",
            "format": "table",
            "hide": false,
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "C"
          },
          {
            "aliasBy": "",
            "annotationTags": "",
            "annotationText": "",
            "annotationTitle": "",
            "constant": 6.5,
            "dataPath": "interfaces",
            "datasource": {
              "type": "fifemon-graphql-datasource",
              "uid": "P6F0309FEA1DB13F7"
            },
            "endTimePath": "endTime",
            "groupBy": "",
            "hide": false,
            "queryText": "{\n  interfaces(device: \"$device\", label__n: \"loopback\") {\n    name\n    label\n    sot_device: device {\n      name\n    }\n    sot_intended_state: status {\n      name\n    }\n  }\n}",
            "refId": "D",
            "timePath": ""
          }
        ],
        "title": "Interfaces Detail",
        "transformations": [
          {
            "id": "renameByRegex",
            "options": {
              "regex": "sot_(.*)\\.name",
              "renamePattern": "$1"
            }
          },
          {
            "id": "groupBy",
            "options": {
              "fields": {
                "Time": {
                  "aggregations": []
                },
                "Value #A": {
                  "aggregations": [
                    "lastNotNull"
                  ],
                  "operation": "aggregate"
                },
                "Value #B": {
                  "aggregations": [
                    "lastNotNull"
                  ],
                  "operation": "aggregate"
                },
                "Value #C": {
                  "aggregations": [
                    "lastNotNull"
                  ],
                  "operation": "aggregate"
                },
                "device": {
                  "aggregations": [],
                  "operation": "groupby"
                },
                "intended_state": {
                  "aggregations": [
                    "lastNotNull"
                  ],
                  "operation": "aggregate"
                },
                "intf_role": {
                  "aggregations": [
                    "lastNotNull"
                  ],
                  "operation": "aggregate"
                },
                "name": {
                  "aggregations": [],
                  "operation": "groupby"
                }
              }
            }
          },
          {
            "id": "merge",
            "options": {}
          },
          {
            "id": "organize",
            "options": {
              "excludeByName": {
                "device": true,
                "sot_device.name": true
              },
              "includeByName": {},
              "indexByName": {},
              "renameByName": {
                "Value #A (lastNotNull)": "Traffic",
                "Value #B (lastNotNull)": "Oper State",
                "Value #C (lastNotNull)": "Enabled",
                "device": "Device",
                "intended_state (lastNotNull)": "Intended State",
                "intf_role (lastNotNull)": "Role",
                "name": "Interface"
              }
            }
          }
        ],
        "type": "table"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "description": "Total Interfaces Up",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "noValue": "0",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 0,
          "y": 24
        },
        "id": 12,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "10.2.3",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "count(interface_oper_status{device=\"$device\"} == 1)",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Up",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "description": "Average Inbound Traffic",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "light-blue",
                  "value": null
                }
              ]
            },
            "unit": "bps"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 0,
          "y": 27
        },
        "id": 15,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "10.2.3",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "editorMode": "code",
            "expr": "avg(rate(interface_in_octets{device=\"$device\"}[2m]) * 8)",
            "instant": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Inbound",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "description": "Interfaces Traffic over time (negative values are outbound traffic)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": true,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 23,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "bps"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byFrameRefID",
                "options": "A"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "light-blue",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byFrameRefID",
                "options": "B"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "light-purple",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 6,
          "w": 20,
          "x": 4,
          "y": 27
        },
        "id": 17,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "10.2.3",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "sum(rate(interface_in_octets{device=\"$device\"}[2m]) * 8)",
            "format": "time_series",
            "instant": false,
            "legendFormat": "Sum(Inbound)",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "sum(rate(interface_out_octets{device=\"$device\"}[2m]) * 8) * -1",
            "format": "time_series",
            "hide": false,
            "instant": false,
            "legendFormat": "Sum(Outbound)",
            "range": true,
            "refId": "B"
          }
        ],
        "title": "Traffic over time",
        "transformations": [],
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "P1809F7CD0C75ACF3"
        },
        "description": "Average Outbound Traffic",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "light-purple"
                }
              ]
            },
            "unit": "bps"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 0,
          "y": 30
        },
        "id": 16,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "10.2.3",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "editorMode": "code",
            "expr": "avg(rate(interface_out_octets{device=\"$device\"}[2m]) * 8)",
            "instant": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Outbound",
        "type": "stat"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 33
        },
        "id": 22,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "description": "Total BGP Prefixes Accepted",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 4,
              "x": 0,
              "y": 15
            },
            "id": 19,
            "options": {
              "colorMode": "value",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto",
              "wideLayout": true
            },
            "pluginVersion": "10.2.3",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P1809F7CD0C75ACF3"
                },
                "editorMode": "code",
                "expr": "sum(bgp_prefixes_accepted{device=\"$device\"})",
                "instant": false,
                "legendFormat": "__auto",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Prefixes Accepted",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P1809F7CD0C75ACF3"
            },
            "description": "BGP State change over time",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "fixed"
                },
                "custom": {
                  "fillOpacity": 70,
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineWidth": 0,
                  "spanNulls": false
                },
                "mappings": [
                  {
                    "options": {
                      "1": {
                        "color": "light-green",
                        "index": 0,
                        "text": "ESTABLISHED"
                      },
                      "2": {
                        "color": "light-red",
                        "index": 1,
                        "text": "IDLE"
                      },
                      "3": {
                        "color": "orange",
                        "index": 2,
                        "text": "CONNECT"
                      },
                      "4": {
                        "color": "orange",
                        "index": 3,
                        "text": "ACTIVE"
                      },
                      "5": {
                        "color": "orange",
                        "index": 4,
                        "text": "CONSENT"
                      },
                      "6": {
                        "color": "orange",
                        "index": 5,
                        "text": "OPENCONFIRM"
                      },
                      "7": {
                        "color": "orange",
                        "index": 6,
                        "text": "NONEXISTENT"
                      }
                    },
                    "type": "value"
                  }
                ],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "bps"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byFrameRefID",
                    "options": "A"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "light-blue",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byFrameRefID",
                    "options": "B"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "light-purple",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 6,
              "w": 20,
              "x": 4,
              "y": 15
            },
            "id": 20,
            "options": {
              "alignValue": "left",
              "legend": {
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "mergeValues": true,
              "rowHeight": 0.9,
              "showValue": "auto",
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "10.2.3",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P1809F7CD0C75ACF3"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "bgp_neighbor_state{device=\"$device\"}",
                "format": "time_series",
                "instant": false,
                "interval": "",
                "legendFormat": "(ASN: {{neighbor_asn}}) - {{neighbor}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "BGP States",
            "transformations": [],
            "type": "state-timeline"
          },
          {
            "datasource": {
              "type": "loki",
              "uid": "P982945308D3682D1"
            },
            "description": "Device Logs Panel",
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 21
            },
            "id": 21,
            "options": {
              "dedupStrategy": "none",
              "enableLogDetails": true,
              "prettifyLogMessage": false,
              "showCommonLabels": false,
              "showLabels": false,
              "showTime": true,
              "sortOrder": "Descending",
              "wrapLogMessage": true
            },
            "pluginVersion": "10.2.3",
            "targets": [
              {
                "datasource": {
                  "type": "loki",
                  "uid": "P982945308D3682D1"
                },
                "editorMode": "builder",
                "expr": "{device=\"$device\"} |= ``",
                "queryType": "range",
                "refId": "A"
              }
            ],
            "title": "Device Logs",
            "transformations": [],
            "type": "logs"
          }
        ],
        "title": "BGP & Logs",
        "type": "row"
      }
    ],
    "refresh": "",
    "schemaVersion": 39,
    "tags": [
      "network"
    ],
    "templating": {
      "list": [
        {
          "current": {
            "selected": false,
            "text": "ceos-02",
            "value": "ceos-02"
          },
          "datasource": {
            "type": "prometheus",
            "uid": "P1809F7CD0C75ACF3"
          },
          "definition": "label_values(device_uptime,device)",
          "description": "Device's name",
          "hide": 0,
          "includeAll": false,
          "label": "Device",
          "multi": false,
          "name": "device",
          "options": [],
          "query": {
            "qryType": 1,
            "query": "label_values(device_uptime,device)",
            "refId": "PrometheusVariableQueryEditor-VariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        }
      ]
    },
    "time": {
      "from": "now-4h",
      "to": "now"
    },
    "timepicker": {},
    "timezone": "",
    "title": "Device Health",
    "uid": "c78e686b-138b-4deb-b6ae-3239dc10a162",
    "version": 28,
    "weekStart": ""
  }