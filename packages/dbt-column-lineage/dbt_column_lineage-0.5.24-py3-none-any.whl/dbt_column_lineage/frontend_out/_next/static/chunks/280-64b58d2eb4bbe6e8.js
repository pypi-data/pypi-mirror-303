"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[280],{35717:function(e,t,a){a.d(t,{h:function(){return E}});var s=a(57437),n=a(99376),r=a(2265),l=a(42396),o=a(33544),i=a(61994),c=a(51268),u=a(83986);let d=e=>(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsxs)("div",{className:"text-gray-500",children:[(0,s.jsx)(c.G,{icon:u.cC_,className:"h-[12px] mr-1"}),(0,s.jsx)("span",{children:e.label})]}),(0,s.jsx)("div",{className:"ml-auto",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.options.length})})]}),m=e=>{let{value:t,label:a,description:n}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:a}),(0,s.jsx)("div",{className:"text-gray-500",children:n})]})},h={control:{base:"flex border rounded-md bg-input hover:cursor-pointer min-w-[100px] !min-h-[36px] w-[100%] h-[100%] text-foreground text-foreground",focus:"",nonFocus:"border-border"},option:{base:"hover:cursor-pointer px-3 py-2 rounded flex gap-2 items-center hover:bg-muted !text-sm",focus:"bg-[rgba(var(--primary),0.1)]",selected:"bg-[rgba(var(--primary),0.3)] hover:bg-[rgba(var(--primary),0.3)] text-primary font-bold"}},g={control:e=>{let{isFocused:t}=e;return(0,i.W)(t?h.control.focus:h.control.nonFocus,h.control.base)},option:e=>{let{isSelected:t,isFocused:a}=e;return(0,i.W)(h.option.base,t?h.option.selected:"",a?h.option.focus:"")},menu:()=>"p-1 mt-1 bg-white rounded-md shadow-md",placeholder:()=>"text-placeholder pl-1",input:()=>"text-foreground pl-1",valueContainer:()=>"p-1 gap-1",singleValue:()=>"pl-1",multiValue:()=>"flex bg-[rgba(var(--primary),0.15)] p-0 pl-2 rounded-sm text-xs overflow-hidden",multiValueLabel:()=>"py-1",multiValueRemove:()=>"bg-[rgba(var(--primary),0.1)] hover:bg-[rgba(var(--primary),0.2)] text-primary px-1 ml-2",indicatorsContainer:()=>"p-1 gap-1",clearIndicator:()=>"text-muted-foreground px-1 hover:text-error",indicatorSeparator:()=>"bg-border",dropdownIndicator:()=>"p-1 hover:bg-muted text-muted-foreground rounded-md hover:text-foreground",groupHeading:()=>"ml-3 mt-2 mb-1 text-muted-foreground text-sm",noOptionsMessage:()=>"text-placeholder py-3"},x=e=>{let{options:t,className:a,isClearable:n=!1,isMulti:c=!1,value:u,onChange:h,useFormatOptionLabel:x=!1}=e;return(0,s.jsx)(l.ZP,{instanceId:(0,r.useId)(),unstyled:!0,options:t,isMulti:c,value:u,isClearable:n,onChange:h,classNames:{...g},className:(0,i.W)(a),formatGroupLabel:d,formatOptionLabel:x?m:void 0,components:{Input:e=>(0,s.jsx)(o.c.Input,{...e,"aria-activedescendant":void 0})}})};var b=a(82029),p=a(33003),f=a(40875);let v=e=>{let{schemas:t,sources:a,selectedSources:n,columns:l,schema:o,activeSource:c,selectedColumns:u,onSchemaChange:d,onSourcesChange:m,onActiveSourceChange:h,onColumnsChange:g,isMulti:v,className:w,searchShowColumn:j,onSearchShowColumnChange:y}=e,[C,N]=(0,r.useState)(!1),S=(0,r.useRef)(null),k=[{id:"table",icon:b.Z,label:"Table"},{id:"column",icon:p.Z,label:"Column"}];return(0,r.useEffect)(()=>{function e(e){["svg","path"].includes(e.target.tagName.toLowerCase())||!S.current||S.current.contains(e.target)||N(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[S]),(0,s.jsxs)("div",{ref:S,className:(0,i.W)("relative inline-block text-left",w),children:[(0,s.jsx)("div",{children:(0,s.jsxs)("button",{type:"button",className:(0,i.W)("inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500",w),onClick:()=>N(!C),children:[(0,s.jsx)("span",{className:o||c||u.length>0?"text-gray-700":"text-gray-400",children:o||c||u.length>0?(0,s.jsxs)(s.Fragment,{children:[o&&"".concat(o),c&&(o?" | ".concat(c):c),u.length>0&&(o||c?" | ":"")+u.join(", ")]}):"Select search model"}),(0,s.jsx)(f.Z,{className:"ml-2 -mr-1 h-5 w-5","aria-hidden":"true"})]})}),C&&(0,s.jsx)("div",{className:"origin-top-left absolute left-0 mt-2 w-[900px] rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-4",role:"menu","aria-orientation":"horizontal","aria-labelledby":"options-menu",children:[(0,s.jsxs)("div",{children:[v&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-700 mb-2",children:"Search View Mode"}),(0,s.jsx)("div",{className:"inline-flex rounded-md shadow-sm mb-4",role:"group",children:k.map(e=>(0,s.jsxs)("button",{type:"button",className:"px-4 py-2 text-sm font-medium border flex items-center whitespace-nowrap ".concat((j?"column":"table")===e.id?"bg-blue-500 text-white border-blue-600":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"," ").concat("table"===e.id?"rounded-l-lg":"rounded-r-lg"),onClick:()=>y("column"===e.id),children:[(0,s.jsx)(e.icon,{className:"mr-2",size:16}),(0,s.jsx)("span",{children:e.label})]},e.id))})]}),(0,s.jsx)("div",{className:"font-medium text-gray-700 mb-2",children:"Schema"}),(0,s.jsx)(x,{options:t,value:{label:o,value:o},onChange:e=>d(e.value),className:"mb-4"}),(0,s.jsx)("div",{className:"font-medium text-gray-700 mb-2",children:"Sources"}),(0,s.jsx)(x,{options:a,value:n.map(e=>({label:e,value:e})),onChange:(e,t)=>{if(console.log(e,t),v){let a=e.map(e=>e.value);m(a),"select-option"===t.action?h(t.option.value):h(a[0])}else m([e.value]),h(e.value)},className:"mb-2",isMulti:v,useFormatOptionLabel:!0})]}),j&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-700 mb-2",children:"Active Source"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:n.map(e=>(0,s.jsx)("button",{className:(0,i.W)("px-3 py-1 rounded-md text-sm font-medium",e===c?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),onClick:()=>h(e),children:e},e))}),(0,s.jsx)("div",{className:"font-medium text-gray-700 mb-2",children:"Columns"}),l[c]&&(0,s.jsx)(x,{options:l[c],value:u.map(e=>({label:e,value:e})),onChange:(e,t)=>{if("clear"===t.action){g([]);return}v?g(e.map(e=>e.value)):g([e.value])},className:"mb-2",isMulti:v,isClearable:!v,useFormatOptionLabel:!0})]})]})})]})};var w=a(38691),j=a(30401),y=a(76865),C=a(33245),N=a(15001),S=a(73247),k=a(65504),L=a(91305);let E=e=>{let{handleFetchData:t}=e,[a,l]=(0,r.useState)("/cl"),[o,i]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[d,m]=(0,r.useState)({}),[h,g]=(0,r.useState)(!0),[x,b]=(0,r.useState)(""),[p,f]=(0,r.useState)([]),[E,M]=(0,r.useState)(""),[z,P]=(0,r.useState)([]),[Z,F]=(0,r.useState)({}),[D,R]=(0,r.useState)(!0),A=(0,w.o)(e=>e.loading),I=(0,w.o)(e=>e.setLoading),O=(0,w.o)(e=>e.setColumnModeEdges),W=(0,w.o)(e=>e.message),T=(0,w.o)(e=>e.messageType),U=(0,n.useRouter)(),V=(0,n.usePathname)(),_=(0,n.useSearchParams)(),G=(0,r.useCallback)(async()=>{let e=await fetch("".concat("","/api/v1/schemas")),t=await e.json();return i(t),t},[]),H=(0,r.useCallback)(async e=>{let t=new URLSearchParams({schema:e}),a=await fetch("".concat("","/api/v1/sources?").concat(t)),s=await a.json();return u(s),s},[x]),J=(0,r.useCallback)(async e=>{let t=new URLSearchParams({source:e}),a=await fetch("".concat("","/api/v1/columns?").concat(t)),s=await a.json();return m(t=>({...t,[e]:s})),s},[x]),Y=(0,r.useCallback)(async e=>{b(e),await H(e)},[]),q=(0,r.useCallback)(async e=>{f(e)},[]),B=(0,r.useCallback)(async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];M(e),d[e]||await J(e),t&&P(Z[e]||[])},[x,d,Z]),K=(0,r.useCallback)(e=>{P(e),F(t=>({...t,[E]:e}))},[E]),Q=(0,r.useCallback)(async function(){let e,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a){var s;let t=_.get("schema"),a=(null===(s=_.get("sources"))||void 0===s?void 0:s.split(","))||[],n=_.get("activeSource"),r=JSON.parse(_.get("selectedColumns"))||{},l=_.get("showColumn"),o="true"==l,i=parseInt(_.get("depth"));G(),Y(t),q(a),B(n,!1),l&&R(o),F(r),P(r[n]||[]),e={schema:t,sources:a,columns:r,showColumn:o,depth:i}}else e={schema:x,sources:p,columns:Z,showColumn:D,depth:NaN};I(!0);let n=await t(e);if(I(!1),O([]),!a&&n){let e=new URLSearchParams({schema:x,sources:p.join(","),activeSource:E,selectedColumns:JSON.stringify(Z),showColumn:D.toString()});U.push("".concat(V,"?").concat(e))}},[V,x,p,E,D,Z]),X=(0,r.useCallback)(e=>{R(e)},[R]),$=(0,r.useCallback)(()=>"/cl"===a,[a]);return(0,r.useEffect)(()=>{_.size?Q(!0):(G(),H(x),J(E)),V!==a&&l(V)},[]),(0,r.useEffect)(()=>{if(x&&p.length>0){if($()&&D){let e=!1;for(let t of p)if(Z[t]&&0!==Z[t].length){e=!0;break}e?g(!1):g(!0)}else g(!1)}else g(!0)},[x,p,E,Z,D]),(0,s.jsxs)("div",{children:[W&&(0,s.jsxs)("div",{className:"absolute top-4 right-4 px-4 py-3 rounded shadow-md z-50 flex items-center ".concat("success"===T?"bg-green-100 border-green-400 text-green-700":"error"===T?"bg-red-100 border-red-400 text-red-700":"bg-blue-100 border-blue-400 text-blue-700"),role:"alert",children:[(e=>{switch(e){case"success":return(0,s.jsx)(j.Z,{className:"inline-block mr-2",size:20});case"error":return(0,s.jsx)(y.Z,{className:"inline-block mr-2",size:20});default:return(0,s.jsx)(C.Z,{className:"inline-block mr-2",size:20})}})(T),(0,s.jsx)("div",{className:"sm:inline text-xs max-w-xl",children:(0,s.jsx)(k.U,{className:"markdown",remarkPlugins:[L.Z],children:W})})]}),(0,s.jsx)("header",{className:"bg-white border-b-[1px]",children:(0,s.jsxs)("nav",{className:"container mr-auto flex flex-wrap flex-col md:flex-row items-center",children:[(0,s.jsx)("a",{className:"flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0",children:(0,s.jsx)("span",{className:"ml-3 text-xl",children:(0,s.jsxs)("select",{value:a,onChange:e=>U.push(e.target.value),children:[(0,s.jsx)("option",{value:"/cte",children:"CTE Lineage"}),(0,s.jsx)("option",{value:"/cl",children:"Column Level Lineage"})]})})}),(0,s.jsxs)("nav",{className:"md:mr-auto md:ml-4 md:py-2 md:pl-4 md:border-l md:border-gray-400 flex flex-wrap items-center text-base justify-center",children:[(0,s.jsx)(v,{schemas:o,sources:c,selectedSources:p,columns:d,schema:x,activeSource:E,selectedColumns:z,onSchemaChange:e=>Y(e),onSourcesChange:e=>q(e),onActiveSourceChange:e=>B(e),onColumnsChange:K,className:"mr-2 w-[60vw]",isMulti:$(),searchShowColumn:D,onSearchShowColumnChange:X}),(0,s.jsxs)("button",{type:"button",className:"rounded px-3 py-1.5 text-s font-medium border bg-blue-400 text-white border-blue-400 flex items-center hover:bg-blue-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>Q(),disabled:h,children:[A?(0,s.jsx)(N.Z,{className:"animate-spin mr-2",size:16}):(0,s.jsx)(S.Z,{className:"mr-2",size:16}),(0,s.jsx)("span",{children:A?"Loading...":"Search"})]})]})]})})]})}},96627:function(e,t,a){a.d(t,{Y:function(){return n}});var s=a(2265);let n=()=>{let[e,t]=(0,s.useState)({width:0,height:600});return(0,s.useEffect)(()=>{{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}},[]),e}},93448:function(e,t,a){a.d(t,{C:function(){return s},p:function(){return n}});let s=e=>{switch(e){case"table":return"bg-[#E6E6FA]";case"view":return"bg-[#F0E6FF]";case"incremental":return"bg-[#ADD8E6]";case"snapshot":return"bg-indigo-200";case"seed":return"bg-violet-200";default:return"bg-gray-200"}},n=["table","view","incremental","snapshot","seed"]},38691:function(e,t,a){a.d(t,{o:function(){return s}});let s=(0,a(97094).Ue)()(e=>({options:{rankdir:"LR"},showColumn:!0,sidebarActive:!1,loading:!1,clearNodePosition:!1,columnModeEdges:[],leftMaxDepth:!1,rightMaxDepth:!1,message:null,messageType:null,setOptions:t=>e({options:t}),setShowColumn:t=>e({showColumn:t}),setSidebarActive:t=>e({sidebarActive:t}),setLoading:t=>e({loading:t}),setClearNodePosition:t=>e({clearNodePosition:t}),setColumnModeEdges:t=>e({columnModeEdges:t}),setLeftMaxDepth:t=>e({leftMaxDepth:t}),setRightMaxDepth:t=>e({rightMaxDepth:t}),setMessage:(t,a)=>e({message:t,messageType:a})}))}}]);