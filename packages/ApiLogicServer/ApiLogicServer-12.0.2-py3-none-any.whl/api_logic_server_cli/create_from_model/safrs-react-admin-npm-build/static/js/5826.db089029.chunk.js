"use strict";(self.webpackChunkreact_admin_upgrade=self.webpackChunkreact_admin_upgrade||[]).push([[5826],{55826:(e,n,t)=>{t.r(n),t.d(n,{ApiAdminHome:()=>f.Vk,ApiFab:()=>X.Q,ApiFabUser:()=>I,ApiGenerateField:()=>f.Sm,ApiShow:()=>f.kE,ApiUserPasswordTab:()=>C,ConnectionString:()=>re,CreateApiFab:()=>te,CreateLocation:()=>Z,CustomTab:()=>Y,CustomerLabel:()=>K,DBConnection:()=>f.Nl,DateTime:()=>se,DownloadProject:()=>Q,EmployeeLabel:()=>q,GApiFab:()=>X.V,MyComp:()=>k,Overlay:()=>ee,ProjectLink:()=>B,Running:()=>J,SampleColumnField:()=>$,UserPasswordField:()=>W,UserPasswordTab:()=>b,UserSettings:()=>z,showApiFab:()=>ne});var s=t(68903),i=t(85865),r=t(94698),a=t(73896),o=t(65043),d=t(85546),c=t(22086),l=t(10510),h=t(42478),p=t(26791),x=t(70579),u=t(11906),g=t(81e3),m=t(67784),j=t(53193),v=t(76738),y=t(51247),w=t(31335),A=t(4611);const b=()=>{const e=(0,w.wy)(),n=(0,A.l)(),t=(0,d.i)(),[r,a]=((0,v.L)(),(0,o.useState)("")),[c,l]=(0,o.useState)(""),[h,p]=(0,o.useState)("secondary");return(0,x.jsx)(g.A,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:(0,x.jsxs)(j.A,{children:[(0,x.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,x.jsx)(i.A,{variant:"body2",component:"p",children:(0,x.jsx)("b",{children:"Change the user password"})})}),(0,x.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,x.jsx)(m.A,{id:"outlined-password-input",label:"New Password",type:"password",onChange:e=>{let n=e.target.value;a(n),p(n===c&&n.length>5?"primary":"secondary")}})}),(0,x.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,x.jsx)(m.A,{id:"outlined-password-input",label:"Repeat Password",type:"password",onChange:e=>{let n=e.target.value;l(n),p(r===n&&r.length>5?"primary":"secondary")}})}),(0,x.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,x.jsx)(u.A,{variant:"contained",color:h,onClick:()=>{if(r!==c)return void n("Passwords don't match",{type:"warning"});if(r.length<6)return void n("Password too short",{type:"warning"});const s={password:r};(0,y.s9)("".concat(e.api_root,"/Users/").concat(null===t||void 0===t?void 0:t.id,"/change_password"),{method:"POST",body:JSON.stringify(s)}).then((()=>n("Password Changed!"))).catch((()=>n("Error Changing Password",{type:"warning"})))},children:"Submit"})})]})})},C=()=>{const e=(0,w.wy)(),n=(0,A.l)(),t=(0,d.i)(),[r,a]=((0,v.L)(),(0,o.useState)("")),[c,l]=(0,o.useState)(""),[h,p]=(0,o.useState)(""),[b,C]=(0,o.useState)("secondary");return(0,x.jsx)(g.A,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:(0,x.jsxs)(j.A,{children:[(0,x.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,x.jsx)(i.A,{variant:"body2",component:"p",children:(0,x.jsx)("b",{children:"Current user password"})})}),(0,x.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,x.jsx)(m.A,{id:"outlined-password-input",label:"Current Password",type:"password",onChange:e=>{let n=e.target.value;a(n),C(n===h&&n.length>5?"primary":"secondary")}})}),(0,x.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,x.jsx)(i.A,{variant:"body2",component:"p",children:(0,x.jsx)("b",{children:"New user password"})})}),(0,x.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,x.jsx)(m.A,{id:"outlined-password-input",label:"New Password",type:"password",onChange:e=>{let n=e.target.value;l(n),C(n===h&&n.length>5?"primary":"secondary")}})}),(0,x.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,x.jsx)(m.A,{id:"outlined-password-input",label:"Repeat Password",type:"password",onChange:e=>{let n=e.target.value;p(n),C(c===n&&c.length>5?"primary":"secondary")}})}),(0,x.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,x.jsx)(u.A,{variant:"contained",color:b,onClick:()=>{if(c!==h)return void n("Passwords don't match",{type:"warning"});if(c.length<1)return void n("Password too short",{type:"warning"});const s={password:c};(0,y.s9)("".concat(e.api_root,"/Users/").concat(null===t||void 0===t?void 0:t.id,"/change_password"),{method:"POST",body:JSON.stringify(s)}).then((()=>n("Password Changed!"))).catch((()=>n("Error Changing Password",{type:"warning"})))},children:"Submit"})})]})})};var f=t(75495);const k=e=>(0,x.jsx)("div",{children:"HMMMM"});var P=t(88446),S=t(17392),F=t(16485),N=t(67672),_=t(41132),M=t(29876),T=t(58650),L=t(84768),U=t(36095),V=t(32982),D=t(69413),H=t(74605),O=t(51962),E=t(39288);const z=e=>{let{settings:n}=e;const[t,s]=(0,o.useState)(null===n||void 0===n?void 0:n.accepted_marketing),i=(0,d.i)(),[r,{data:a,isPending:c,error:l}]=(0,V.x)("User",{id:null===i||void 0===i?void 0:i.id,data:{settings:n},previousData:i});return console.log(i),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(R,{settings:n,checked:t,setChecked:s}),(0,x.jsx)(u.A,{onClick:()=>{r()},variant:"outlined",children:c?"Updating...":"Save Changes"}),(null===l||void 0===l?void 0:l.message)||""]})},R=e=>{let{settings:n,checked:t,setChecked:s}=e;return(0,x.jsx)(D.A,{children:(0,x.jsx)(H.A,{control:(0,x.jsx)(O.A,{checked:t,onChange:e=>{s(e.target.checked)},name:"checked",color:"primary"}),label:"Receive e-mail notifications"})})},G=e=>{let{identity:n}=e;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(T.N,{to:"https://apifabric.ai/static/privacy-policy.html",children:"Privacy Policy"}),(0,x.jsx)("br",{}),(0,x.jsx)(T.N,{to:"https://kc.apifabric.ai/realms/kcals/account",children:"Manage Security Settings"}),(0,x.jsx)("br",{}),(0,x.jsx)(T.N,{to:"https://apifabric.ai/deleteUser?id=".concat(n.id),children:"Delete Account"})]})},I=()=>{const{identity:e,isLoading:n}=(0,M.e)(),t=(0,d.i)(),s=(0,E.$n)(localStorage.getItem("authToken")||"");return t?n?(0,x.jsx)("div",{children:"Loading..."}):e&&s?(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(L.w,{actions:!1,children:(0,x.jsxs)(U._,{children:[(0,x.jsx)(r.A,{source:"username"}),(0,x.jsx)("br",{}),(0,x.jsx)(G,{identity:e}),(0,x.jsx)(z,{settings:t.settings||{}})]})})}):(0,x.jsx)("div",{children:"No user found"}):null},J=()=>{const e=(0,d.i)();return e?(0,x.jsx)(g.A,{sx:{textAlign:"center"},children:(0,x.jsx)(g.A,{sx:{display:"flex",alignItems:"center"},children:(0,x.jsx)(N.m,{record:e})})}):null},B=()=>{const e=(0,d.i)();return e&&e.running?(0,x.jsx)(P.A,{href:e.link,target:"_blank",onClick:e=>e.stopPropagation(),children:(0,x.jsx)(F.A,{sx:{color:"rgb(63, 81, 181)"}})}):null},Q=()=>{const e=(0,d.i)();return e?(0,x.jsx)(P.A,{title:"Download",href:e.download,target:"_blank",onClick:e=>e.stopPropagation(),children:(0,x.jsx)(S.A,{children:(0,x.jsx)(_.A,{sx:{color:"rgb(63, 81, 181)"}})})}):(0,x.jsx)(x.Fragment,{})};var X=t(54004);const $=e=>{let{attribute:n}=e;return console.log("attribute: ",n),(0,x.jsx)(r.A,{source:n.name,style:{color:"red"}},n.name)},q=e=>{var n,t;const s=e.instance;return(0,x.jsxs)("div",{children:[" ",null===(n=s.attributes)||void 0===n?void 0:n.FirstName," ",null===(t=s.attributes)||void 0===t?void 0:t.LastName]})},K=e=>{var n,t;const s=e.instance;return(0,x.jsxs)("div",{children:[" ",(0,x.jsx)("b",{children:null===(n=s.attributes)||void 0===n?void 0:n.CompanyName})," ",(0,x.jsx)("i",{children:null===(t=s.attributes)||void 0===t?void 0:t.ContactName})]})},W=e=>"list"===e.mode?(0,x.jsx)("span",{}):"edit"===e.mode?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,x.jsx)(i.A,{variant:"h6",component:"h6",children:"Change Password"})}),(0,x.jsxs)(s.Ay,{item:!0,xs:4,spacing:4,children:[(0,x.jsx)(a.y,{source:"_password"})," "]}),(0,x.jsxs)(s.Ay,{item:!0,xs:4,spacing:4,children:[(0,x.jsx)(a.y,{source:"_password"})," "]}),(0,x.jsx)(s.Ay,{item:!0,xs:4,spacing:4})]}):(0,x.jsx)(x.Fragment,{}),Y=e=>{(0,d.i)();return(0,x.jsx)("div",{children:"Some Text"})},Z=e=>(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(l.X,{children:(0,x.jsx)(h.G,{attributes:[]})})}),ee=()=>(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{id:"popup-overlay"})}),ne=()=>(0,x.jsx)(p.jb,{}),te=()=>{const e=(0,c.w)();return o.useEffect((()=>{e("/Home")}),[]),(0,x.jsx)(x.Fragment,{})},se=e=>{let{attribute:n,mode:t,...s}=e;const i=(0,d.i)();if(!i||null===n||void 0===n||!n.name)return(0,x.jsx)(x.Fragment,{});console.log("DateTime: ",n,t,s);const r=i[null===n||void 0===n?void 0:n.name].split(".")[0];return(0,x.jsx)(x.Fragment,{children:r})},ie=e=>{let n=null;if(e){const t=e.match(/(.*):(.*)@(.*)/);n=t?"".concat(t[1],":********@").concat(t[3]):e}return(0,x.jsx)(x.Fragment,{children:n})},re=e=>{const n=(0,d.i)();return(0,x.jsx)("span",{children:ie(null===n||void 0===n?void 0:n.connection_string)})}},41132:(e,n,t)=>{var s=t(24994);n.A=void 0;var i=s(t(40039)),r=t(70579);n.A=(0,i.default)((0,r.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download")},16485:(e,n,t)=>{var s=t(24994);n.A=void 0;var i=s(t(40039)),r=t(70579);n.A=(0,i.default)((0,r.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew")}}]);
//# sourceMappingURL=5826.db089029.chunk.js.map