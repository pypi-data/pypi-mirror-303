[gh-actions]
python =
    3.9: py39, dist, isort, lint, readme
    3.10: py310
    3.11: py311
    3.12: py312
    3.13: py313

[tox]
envlist =
        py39-django{42}
        py310-django{42,50,51}
        py311-django{42,50,51}
        py312-django{42,50,51}
        py313-django{51}
        dist,isort,lint,readme

[testenv]
commands = coverage run manage.py test {posargs: --no-input -v 2}
usedevelop = True
envdir={toxworkdir}/v/{envname}
setenv =
    PYTHONDONTWRITEBYTECODE = 1
deps =
    coverage
    django42: Django>=4.2,<4.3
    django50: Django>=5.0,<5.1
    django51: Django>=5.1,<5.2

[testenv:dist]
commands = python manage.py test {posargs: --no-input -v 2}
usedevelop = False

[testenv:isort]
commands = isort --check-only --recursive src tests {posargs:--diff}
deps =
    isort

[testenv:lint]
commands = flake8 src tests {posargs}
deps =
    flake8
    flake8-bugbear
    flake8-commas
    flake8-quotes

[testenv:readme]
commands =
    python -m build
    twine check dist/*
usedevelop = False
deps =
    build
    twine
