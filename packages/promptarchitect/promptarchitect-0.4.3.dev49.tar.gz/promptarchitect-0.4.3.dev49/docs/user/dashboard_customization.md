# Dashboard Customization

PromptArchitect allows you to customize the dashboard's appearance by modifying two key template files: `dashboard.html` and `prompt_file.html`. These templates use placeholders within `{{ }}` that are dynamically replaced with actual data during runtime. By editing these templates, you can create custom themes that align with your branding or aesthetic preferences.

---

## Table of Contents

- [Dashboard Customization](#dashboard-customization)
  - [Table of Contents](#table-of-contents)
  - [Introduction](#introduction)
  - [Understanding Template Files](#understanding-template-files)
    - [Placeholders](#placeholders)
  - [Creating a Custom Theme](#creating-a-custom-theme)
    - [Step 1: Duplicate the Default Templates](#step-1-duplicate-the-default-templates)
    - [Step 2: Customize the Templates](#step-2-customize-the-templates)
    - [Step 3: Apply the Custom Theme](#step-3-apply-the-custom-theme)
  - [Template File Details](#template-file-details)
    - [dashboard.html](#dashboardhtml)
      - [Key Placeholders in `dashboard.html`](#key-placeholders-in-dashboardhtml)
    - [prompt\_file.html](#prompt_filehtml)
      - [Key Placeholders in `prompt_file.html`](#key-placeholders-in-prompt_filehtml)
  - [Best Practices](#best-practices)
  - [Troubleshooting](#troubleshooting)
  - [Additional Resources](#additional-resources)

---

## Introduction

The dashboard in PromptArchitect is a web-based interface that displays reports, test results, and other information generated by the tool. Customizing the dashboard allows you to tailor the look and feel to match your organization's branding or personal preferences.

## Understanding Template Files

The dashboard's appearance is defined by two main HTML template files:

- `dashboard.html`: The main dashboard page showing an overview of prompts, tests, and statistics.
- `prompt_file.html`: The detail page for individual prompt files, displaying test results and prompt specifics.

These templates use placeholders within `{{ }}` that are replaced with actual data when the dashboard is rendered.

### Placeholders

Placeholders are variables enclosed in double curly braces `{{ }}`. During runtime, these placeholders are substituted with dynamic content.

**Example of a Placeholder:**

```html
<h1>{{ specification.filename }}</h1>
```

In this example, {{ specification.filename }} will be replaced with the filename of the prompt specification.

## Creating a Custom Theme

### Step 1: Duplicate the Default Templates

Start by creating a new directory for your custom theme and copying the default template files into it.

**Example:**

```bash
mkdir themes/my-custom-theme
cp templates/dashboard.html themes/my-custom-theme/dashboard.html
cp templates/prompt_file.html themes/my-custom-theme/prompt_file.html
```

### Step 2: Customize the Templates

Edit the copied dashboard.html and prompt_file.html files in your custom theme directory to modify the dashboard's appearance.

- Use any HTML structure you prefer.
- Ensure that you include all necessary placeholders within {{ }} to display dynamic data.
- You can add custom styles, scripts, and additional content as needed.
  
**Important:** The placeholders must be included somewhere in your templates to display the corresponding data.

### Step 3: Apply the Custom Theme

To use your custom theme, specify the path to your theme when running PromptArchitect via the CLI:

```bash
promptarchitect --templates themes/my-custom-theme
```

## Template File Details

### dashboard.html

The `dashboard.html` file defines the main dashboard page. Here's an example structure:

```html
<div class="header">
  <h1>DASHBOARD ENGINEERED PROMPTS</h1>
  <!-- Logo and other header elements -->
</div>

<table id="datatable">
  <!-- Statistics and summary data -->
  <tr>
    <td>
      <div class="statistic">
        <div class="title">Errors &amp; Warnings</div>
        <div class="numbers">{{ total_errors_warnings }}</div>
      </div>
      <!-- More statistics -->
    </td>
  </tr>
</table>

<h2>Prompt files with tests</h2>
<table>
  <thead>
    <!-- Table headers -->
  </thead>
  <tbody>
    {% for prompt_file in files_with_tests %}
    <tr>
      <td><a href="{{ prompt_file | detail_report_path }}">{{ prompt_file.specification.filename }}</a></td>
      <!-- More data -->
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- Additional content -->

<h2>Errors and Warnings</h2>
<p>{{ errors_warnings }}</p>
{{ errors_warnings_details }}
```

#### Key Placeholders in `dashboard.html`

- `{{ total_errors_warnings }}`
- `{{ percentage_with_tests }}`
- `{{ total_prompt_costs }}`
- `{{ total_test_costs }}`
- `{{ total_prompt_duration }}`
- `{{ total_test_duration }}`
- `{{ files_with_tests }}`
- `{{ errors_warnings }}`
- `{{ errors_warnings_details }}`

### prompt_file.html

The `prompt_file.html` file defines the detail page for individual prompts.

```html
<div class="container">
  <div class="header">
    <h1>Test Report: {{ specification.filename }}</h1>
    <!-- Logo and header elements -->
  </div>
  <p>Creation Date: {{ date_created }}<br>Test Files: {{ specification.metadata.test_path }}</p>

  <!-- Statistics -->
  <div class="stats-container">
    <!-- Stat cards with placeholders -->
    <div class="stat-card">
      <h3>Total Prompt Duration</h3>
      <p>{{ total_prompt_duration | round }} sec</p>
    </div>
    <!-- More stat cards -->
  </div>

  <h2>Test Results</h2>
  {% for test in tests %}
  <h3>{{ test.test_id }}</h3>
  <table>
    <!-- Table with test results -->
    {% for test_outcome in test.outcomes %}
    <tr>
      <td><span class="status {{ test_outcome.status | lowercase }}">{{ test_outcome.status }}</span></td>
      <td>{{ test_outcome.input_sample.filename }}</td>
      <!-- More data -->
    </tr>
    {% endfor %}
  </table>
  {% endfor %}

  <h2>Errors and Warnings</h2>
  <div class="card">
    {% if total_errors == 0 and total_warnings == 0 %}
    <p>No errors or warnings found.</p>
    {% else %}
    <ul>
      {% for message in messages %}
      <li class="{{ message.level | lowercase }}">{{ message.level }}: {{ message.message }}</li>
      {% endfor %}
    </ul>
    {% endif %}
  </div>

  <h2>System Role</h2>
  <div class="card">
    <p>{{ specification.metadata.system_role }}</p>
  </div>

  <h2>Engineered Prompt</h2>
  <div class="card">
    {{ specification.prompt }}
  </div>
</div>
```

#### Key Placeholders in `prompt_file.html`

- `{{ specification.filename }}`
- `{{ date_created }}`
- `{{ specification.metadata.test_path }}`
- `{{ total_prompt_duration }}`
- `{{ total_prompt_costs }}`
- `{{ total_test_duration }}`
- `{{ total_test_costs }}`
- `{{ total_errors }}`
- `{{ total_warnings }}`
- `{{ tests }}`
- `{{ messages }}`
- `{{ specification.metadata.system_role }}`
- `{{ specification.prompt }}`

## Best Practices

- **Include All Necessary Placeholders**: Ensure that your templates contain all the required placeholders to display dynamic content correctly.
- **Customize Styles and Layouts**: Feel free to modify the HTML structure, add CSS styles, and incorporate JavaScript to enhance functionality.
- **Test Thoroughly**: After making changes, test your dashboard to ensure all data is displayed correctly and that there are no rendering issues.
- **Maintain Readability**: Keep your code organized and well-commented to make future updates easier.

## Troubleshooting

- **Placeholders Not Replaced**:
  - Ensure that the placeholders are correctly spelled and match the data provided by PromptArchitect.
  - Verify that the placeholders are enclosed within {{ }}.
- **Template Rendering Issues**:
  - Check for any syntax errors in your HTML files.
  - Ensure that loops and conditional statements are properly structured if you use template logic (e.g., {% for %} loops).
- **Missing Data**:
  - Confirm that the data you expect is available in the context when the template is rendered.
  - Use debug statements or logs to inspect the data being passed to the templates.

## Additional Resources

- Template Engine Documentation: [Jinja Documentation](https://jinja.palletsprojects.com/en/3.1.x/).
