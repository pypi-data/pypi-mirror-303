import{a as Q,i as V,s as W,f as m,ao as Y,o as A,p as y,_ as Z,k as M,r as q,x as H,b4 as ce,bb as he,y as O,t as w,b as k,n as U,z as oe,j,w as K,q as x,D as S,l as J,K as ge,v as ee,c as C,m as D,d as P,be as de,M as fe,F as N,E as me,G as le,a4 as te,a5 as ne,e as be,u as we,g as ke,h as ve}from"../lite.js";import{B as re}from"./BlockLabel-Csq-m9b-.js";import{E as pe}from"./Empty-Cp3Q4QD4.js";import{F as X}from"./File-CO-UlNpX.js";import{U as ze}from"./Upload-DklyvIUd.js";import{M as Fe}from"./ModifyUpload-2Y59LuVB.js";import{D as qe}from"./DownloadLink-E9rgDYEZ.js";const ie=i=>{let e=["B","KB","MB","GB","PB"],t=0;for(;i>1024;)i/=1024,t++;let l=e[t];return i.toFixed(1)+"&nbsp;"+l};function se(i,e,t){const l=i.slice();return l[12]=e[t],l[14]=t,l}function ye(i){let e=i[2]("file.uploading")+"",t;return{c(){t=j(e)},m(l,n){M(l,t,n)},p(l,n){n&4&&e!==(e=l[2]("file.uploading")+"")&&J(t,e)},i:ee,o:ee,d(l){l&&U(t)}}}function Be(i){let e,t;return e=new qe({props:{href:i[12].url,download:i[6]&&window.__is_colab__?null:i[12].orig_name,$$slots:{default:[Ee]},$$scope:{ctx:i}}}),{c(){C(e.$$.fragment)},m(l,n){D(e,l,n),t=!0},p(l,n){const s={};n&8&&(s.href=l[12].url),n&8&&(s.download=l[6]&&window.__is_colab__?null:l[12].orig_name),n&32776&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){P(e,l)}}}function Ee(i){let e,t=(i[12].size!=null?ie(i[12].size):"(size unknown)")+"",l;return{c(){e=new de(!1),l=j(" ⇣"),e.a=l},m(n,s){e.m(t,n,s),M(n,l,s)},p(n,s){s&8&&t!==(t=(n[12].size!=null?ie(n[12].size):"(size unknown)")+"")&&e.p(t)},d(n){n&&(e.d(),U(l))}}}function ae(i){let e,t,l,n;function s(){return i[8](i[14])}function _(...c){return i[9](i[14],...c)}return{c(){e=A("td"),t=A("button"),t.textContent="×",y(t,"class","label-clear-button svelte-18wv37q"),y(t,"aria-label","Remove this file"),y(e,"class","svelte-18wv37q")},m(c,f){M(c,e,f),q(e,t),l||(n=[S(t,"click",s),S(t,"keydown",_)],l=!0)},p(c,f){i=c},d(c){c&&U(e),l=!1,ge(n)}}}function ue(i,e){let t,l,n,s=e[12].filename_stem+"",_,c,f,u=e[12].filename_ext+"",o,a,g,b,d,h,v,z,E,L,I;const G=[Be,ye],$=[];function T(F,B){return F[12].url?0:1}d=T(e),h=$[d]=G[d](e);let p=e[3].length>1&&ae(e);function R(...F){return e[10](e[14],...F)}return{key:i,first:null,c(){t=A("tr"),l=A("td"),n=A("span"),_=j(s),c=K(),f=A("span"),o=j(u),g=K(),b=A("td"),h.c(),v=K(),p&&p.c(),z=K(),y(n,"class","stem svelte-18wv37q"),y(f,"class","ext svelte-18wv37q"),y(l,"class","filename svelte-18wv37q"),y(l,"aria-label",a=e[12].orig_name),y(b,"class","download svelte-18wv37q"),y(t,"class","file svelte-18wv37q"),x(t,"selectable",e[0]),this.first=t},m(F,B){M(F,t,B),q(t,l),q(l,n),q(n,_),q(l,c),q(l,f),q(f,o),q(t,g),q(t,b),$[d].m(b,null),q(t,v),p&&p.m(t,null),q(t,z),E=!0,L||(I=S(t,"click",R),L=!0)},p(F,B){e=F,(!E||B&8)&&s!==(s=e[12].filename_stem+"")&&J(_,s),(!E||B&8)&&u!==(u=e[12].filename_ext+"")&&J(o,u),(!E||B&8&&a!==(a=e[12].orig_name))&&y(l,"aria-label",a);let r=d;d=T(e),d===r?$[d].p(e,B):(H(),k($[r],1,1,()=>{$[r]=null}),O(),h=$[d],h?h.p(e,B):(h=$[d]=G[d](e),h.c()),w(h,1),h.m(b,null)),e[3].length>1?p?p.p(e,B):(p=ae(e),p.c(),p.m(t,z)):p&&(p.d(1),p=null),(!E||B&1)&&x(t,"selectable",e[0])},i(F){E||(w(h),E=!0)},o(F){k(h),E=!1},d(F){F&&U(t),$[d].d(),p&&p.d(),L=!1,I()}}}function $e(i){let e,t,l,n=[],s=new Map,_,c=Y(i[3]);const f=u=>u[12];for(let u=0;u<c.length;u+=1){let o=se(i,c,u),a=f(o);s.set(a,n[u]=ue(a,o))}return{c(){e=A("div"),t=A("table"),l=A("tbody");for(let u=0;u<n.length;u+=1)n[u].c();y(l,"class","svelte-18wv37q"),y(t,"class","file-preview svelte-18wv37q"),y(e,"class","file-preview-holder svelte-18wv37q"),Z(e,"max-height",typeof i[1]===void 0?"auto":i[1]+"px")},m(u,o){M(u,e,o),q(e,t),q(t,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(l,null);_=!0},p(u,[o]){o&125&&(c=Y(u[3]),H(),n=ce(n,o,f,1,u,c,s,l,he,ue,null,se),O()),(!_||o&2)&&Z(e,"max-height",typeof u[1]===void 0?"auto":u[1]+"px")},i(u){if(!_){for(let o=0;o<c.length;o+=1)w(n[o]);_=!0}},o(u){for(let o=0;o<n.length;o+=1)k(n[o]);_=!1},d(u){u&&U(e);for(let o=0;o<n.length;o+=1)n[o].d()}}}function Ae(i){const e=i.lastIndexOf(".");return e===-1?[i,""]:[i.slice(0,e),i.slice(e)]}function Me(i,e,t){let l;const n=oe();let{value:s}=e,{selectable:_=!1}=e,{height:c=void 0}=e,{i18n:f}=e;function u(h,v){const z=h.currentTarget;(h.target===z||z&&z.firstElementChild&&h.composedPath().includes(z.firstElementChild))&&n("select",{value:l[v].orig_name,index:v})}function o(h){const v=l.splice(h,1);t(3,l=[...l]),t(7,s=l),n("delete",v[0]),n("change",l)}const a=typeof window<"u",g=h=>{o(h)},b=(h,v)=>{v.key==="Enter"&&o(h)},d=(h,v)=>{u(v,h)};return i.$$set=h=>{"value"in h&&t(7,s=h.value),"selectable"in h&&t(0,_=h.selectable),"height"in h&&t(1,c=h.height),"i18n"in h&&t(2,f=h.i18n)},i.$$.update=()=>{i.$$.dirty&128&&t(3,l=(Array.isArray(s)?s:[s]).map(h=>{const[v,z]=Ae(h.orig_name??"");return{...h,filename_stem:v,filename_ext:z}}))},[_,c,f,l,u,o,a,s,g,b,d]}class Ue extends Q{constructor(e){super(),V(this,e,Me,$e,W,{value:7,selectable:0,height:1,i18n:2})}get value(){return this.$$.ctx[7]}set value(e){this.$$set({value:e}),m()}get selectable(){return this.$$.ctx[0]}set selectable(e){this.$$set({selectable:e}),m()}get height(){return this.$$.ctx[1]}set height(e){this.$$set({height:e}),m()}get i18n(){return this.$$.ctx[2]}set i18n(e){this.$$set({i18n:e}),m()}}const _e=Ue;function Ce(i){let e,t;return e=new pe({props:{unpadded_box:!0,size:"large",$$slots:{default:[Pe]},$$scope:{ctx:i}}}),{c(){C(e.$$.fragment)},m(l,n){D(e,l,n),t=!0},p(l,n){const s={};n&128&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){P(e,l)}}}function De(i){let e,t;return e=new _e({props:{i18n:i[5],selectable:i[3],value:i[0],height:i[4]}}),e.$on("select",i[6]),{c(){C(e.$$.fragment)},m(l,n){D(e,l,n),t=!0},p(l,n){const s={};n&32&&(s.i18n=l[5]),n&8&&(s.selectable=l[3]),n&1&&(s.value=l[0]),n&16&&(s.height=l[4]),e.$set(s)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){P(e,l)}}}function Pe(i){let e,t;return e=new X({}),{c(){C(e.$$.fragment)},m(l,n){D(e,l,n),t=!0},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){P(e,l)}}}function Ie(i){let e,t,l,n,s,_,c;e=new re({props:{show_label:i[2],float:i[0]===null,Icon:X,label:i[1]||"File"}});const f=[De,Ce],u=[];function o(a,g){return g&1&&(l=null),l==null&&(l=!!(a[0]&&(!Array.isArray(a[0])||a[0].length>0))),l?0:1}return n=o(i,-1),s=u[n]=f[n](i),{c(){C(e.$$.fragment),t=K(),s.c(),_=fe()},m(a,g){D(e,a,g),M(a,t,g),u[n].m(a,g),M(a,_,g),c=!0},p(a,[g]){const b={};g&4&&(b.show_label=a[2]),g&1&&(b.float=a[0]===null),g&2&&(b.label=a[1]||"File"),e.$set(b);let d=n;n=o(a,g),n===d?u[n].p(a,g):(H(),k(u[d],1,1,()=>{u[d]=null}),O(),s=u[n],s?s.p(a,g):(s=u[n]=f[n](a),s.c()),w(s,1),s.m(_.parentNode,_))},i(a){c||(w(e.$$.fragment,a),w(s),c=!0)},o(a){k(e.$$.fragment,a),k(s),c=!1},d(a){a&&(U(t),U(_)),P(e,a),u[n].d(a)}}}function Ge(i,e,t){let{value:l=null}=e,{label:n}=e,{show_label:s=!0}=e,{selectable:_=!1}=e,{height:c=void 0}=e,{i18n:f}=e;function u(o){N.call(this,i,o)}return i.$$set=o=>{"value"in o&&t(0,l=o.value),"label"in o&&t(1,n=o.label),"show_label"in o&&t(2,s=o.show_label),"selectable"in o&&t(3,_=o.selectable),"height"in o&&t(4,c=o.height),"i18n"in o&&t(5,f=o.i18n)},[l,n,s,_,c,f,u]}class Ke extends Q{constructor(e){super(),V(this,e,Ge,Ie,W,{value:0,label:1,show_label:2,selectable:3,height:4,i18n:5})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),m()}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),m()}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),m()}get selectable(){return this.$$.ctx[3]}set selectable(e){this.$$set({selectable:e}),m()}get height(){return this.$$.ctx[4]}set height(e){this.$$set({height:e}),m()}get i18n(){return this.$$.ctx[5]}set i18n(e){this.$$set({i18n:e}),m()}}const Ye=Ke;function Le(i){let e,t,l,n;function s(f){i[20](f)}function _(f){i[21](f)}let c={filetype:i[5],file_count:i[4],max_file_size:i[10],root:i[7],stream_handler:i[12],upload:i[11],$$slots:{default:[Te]},$$scope:{ctx:i}};return i[13]!==void 0&&(c.dragging=i[13]),i[1]!==void 0&&(c.uploading=i[1]),e=new ze({props:c}),le.push(()=>te(e,"dragging",s)),le.push(()=>te(e,"uploading",_)),e.$on("load",i[14]),e.$on("error",i[22]),{c(){C(e.$$.fragment)},m(f,u){D(e,f,u),n=!0},p(f,u){const o={};u&32&&(o.filetype=f[5]),u&16&&(o.file_count=f[4]),u&1024&&(o.max_file_size=f[10]),u&128&&(o.root=f[7]),u&4096&&(o.stream_handler=f[12]),u&2048&&(o.upload=f[11]),u&8388608&&(o.$$scope={dirty:u,ctx:f}),!t&&u&8192&&(t=!0,o.dragging=f[13],ne(()=>t=!1)),!l&&u&2&&(l=!0,o.uploading=f[1],ne(()=>l=!1)),e.$set(o)},i(f){n||(w(e.$$.fragment,f),n=!0)},o(f){k(e.$$.fragment,f),n=!1},d(f){P(e,f)}}}function Ne(i){let e,t,l,n;return e=new Fe({props:{i18n:i[9]}}),e.$on("clear",i[15]),l=new _e({props:{i18n:i[9],selectable:i[6],value:i[0],height:i[8]}}),l.$on("select",i[17]),l.$on("change",i[18]),l.$on("delete",i[19]),{c(){C(e.$$.fragment),t=K(),C(l.$$.fragment)},m(s,_){D(e,s,_),M(s,t,_),D(l,s,_),n=!0},p(s,_){const c={};_&512&&(c.i18n=s[9]),e.$set(c);const f={};_&512&&(f.i18n=s[9]),_&64&&(f.selectable=s[6]),_&1&&(f.value=s[0]),_&256&&(f.height=s[8]),l.$set(f)},i(s){n||(w(e.$$.fragment,s),w(l.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),k(l.$$.fragment,s),n=!1},d(s){s&&U(t),P(e,s),P(l,s)}}}function Te(i){let e;const t=i[16].default,l=be(t,i,i[23],null);return{c(){l&&l.c()},m(n,s){l&&l.m(n,s),e=!0},p(n,s){l&&l.p&&(!e||s&8388608)&&we(l,t,n,n[23],e?ve(t,n[23],s,null):ke(n[23]),null)},i(n){e||(w(l,n),e=!0)},o(n){k(l,n),e=!1},d(n){l&&l.d(n)}}}function je(i){let e,t,l,n,s,_,c;e=new re({props:{show_label:i[3],Icon:X,float:!i[0],label:i[2]||"File"}});const f=[Ne,Le],u=[];function o(a,g){return g&1&&(l=null),l==null&&(l=!!(a[0]&&(!Array.isArray(a[0])||a[0].length>0))),l?0:1}return n=o(i,-1),s=u[n]=f[n](i),{c(){C(e.$$.fragment),t=K(),s.c(),_=fe()},m(a,g){D(e,a,g),M(a,t,g),u[n].m(a,g),M(a,_,g),c=!0},p(a,[g]){const b={};g&8&&(b.show_label=a[3]),g&1&&(b.float=!a[0]),g&4&&(b.label=a[2]||"File"),e.$set(b);let d=n;n=o(a,g),n===d?u[n].p(a,g):(H(),k(u[d],1,1,()=>{u[d]=null}),O(),s=u[n],s?s.p(a,g):(s=u[n]=f[n](a),s.c()),w(s,1),s.m(_.parentNode,_))},i(a){c||(w(e.$$.fragment,a),w(s),c=!0)},o(a){k(e.$$.fragment,a),k(s),c=!1},d(a){a&&(U(t),U(_)),P(e,a),u[n].d(a)}}}function He(i,e,t){let{$$slots:l={},$$scope:n}=e,{value:s}=e,{label:_}=e,{show_label:c=!0}=e,{file_count:f="single"}=e,{file_types:u=null}=e,{selectable:o=!1}=e,{root:a}=e,{height:g=void 0}=e,{i18n:b}=e,{max_file_size:d=null}=e,{upload:h}=e,{stream_handler:v}=e,{uploading:z=!1}=e;async function E({detail:r}){t(0,s=r),await me(),I("change",s),I("upload",r)}function L(){t(0,s=null),I("change",null),I("clear")}const I=oe();let G=!1;function $(r){N.call(this,i,r)}function T(r){N.call(this,i,r)}function p(r){N.call(this,i,r)}function R(r){G=r,t(13,G)}function F(r){z=r,t(1,z)}function B(r){N.call(this,i,r)}return i.$$set=r=>{"value"in r&&t(0,s=r.value),"label"in r&&t(2,_=r.label),"show_label"in r&&t(3,c=r.show_label),"file_count"in r&&t(4,f=r.file_count),"file_types"in r&&t(5,u=r.file_types),"selectable"in r&&t(6,o=r.selectable),"root"in r&&t(7,a=r.root),"height"in r&&t(8,g=r.height),"i18n"in r&&t(9,b=r.i18n),"max_file_size"in r&&t(10,d=r.max_file_size),"upload"in r&&t(11,h=r.upload),"stream_handler"in r&&t(12,v=r.stream_handler),"uploading"in r&&t(1,z=r.uploading),"$$scope"in r&&t(23,n=r.$$scope)},i.$$.update=()=>{i.$$.dirty&8192&&I("drag",G)},[s,z,_,c,f,u,o,a,g,b,d,h,v,G,E,L,l,$,T,p,R,F,B,n]}class Oe extends Q{constructor(e){super(),V(this,e,He,je,W,{value:0,label:2,show_label:3,file_count:4,file_types:5,selectable:6,root:7,height:8,i18n:9,max_file_size:10,upload:11,stream_handler:12,uploading:1})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),m()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),m()}get show_label(){return this.$$.ctx[3]}set show_label(e){this.$$set({show_label:e}),m()}get file_count(){return this.$$.ctx[4]}set file_count(e){this.$$set({file_count:e}),m()}get file_types(){return this.$$.ctx[5]}set file_types(e){this.$$set({file_types:e}),m()}get selectable(){return this.$$.ctx[6]}set selectable(e){this.$$set({selectable:e}),m()}get root(){return this.$$.ctx[7]}set root(e){this.$$set({root:e}),m()}get height(){return this.$$.ctx[8]}set height(e){this.$$set({height:e}),m()}get i18n(){return this.$$.ctx[9]}set i18n(e){this.$$set({i18n:e}),m()}get max_file_size(){return this.$$.ctx[10]}set max_file_size(e){this.$$set({max_file_size:e}),m()}get upload(){return this.$$.ctx[11]}set upload(e){this.$$set({upload:e}),m()}get stream_handler(){return this.$$.ctx[12]}set stream_handler(e){this.$$set({stream_handler:e}),m()}get uploading(){return this.$$.ctx[1]}set uploading(e){this.$$set({uploading:e}),m()}}const Ze=Oe;export{Ze as B,Ye as F,_e as a};
//# sourceMappingURL=FileUpload-XIx4GShl.js.map
