{"version":3,"file":"BokehPlot-bJnjfGYw.js","sources":["../../../plot/dist/shared/plot_types/BokehPlot.svelte"],"sourcesContent":["<script>import { onDestroy, createEventDispatcher } from \"svelte\";\nexport let value;\nexport let bokeh_version;\nconst div_id = `bokehDiv-${Math.random().toString(5).substring(2)}`;\nconst dispatch = createEventDispatcher();\n$:\n  plot = value?.plot;\nasync function embed_bokeh(_plot) {\n  if (document) {\n    if (document.getElementById(div_id)) {\n      document.getElementById(div_id).innerHTML = \"\";\n    }\n  }\n  if (window.Bokeh) {\n    load_bokeh();\n    let plotObj = JSON.parse(_plot);\n    const y = await window.Bokeh.embed.embed_item(plotObj, div_id);\n    y._roots.forEach(async (p) => {\n      await p.ready;\n      dispatch(\"load\");\n    });\n  }\n}\n$:\n  loaded && embed_bokeh(plot);\nconst main_src = `https://cdn.bokeh.org/bokeh/release/bokeh-${bokeh_version}.min.js`;\nconst plugins_src = [\n  `https://cdn.pydata.org/bokeh/release/bokeh-widgets-${bokeh_version}.min.js`,\n  `https://cdn.pydata.org/bokeh/release/bokeh-tables-${bokeh_version}.min.js`,\n  `https://cdn.pydata.org/bokeh/release/bokeh-gl-${bokeh_version}.min.js`,\n  `https://cdn.pydata.org/bokeh/release/bokeh-api-${bokeh_version}.min.js`\n];\nlet loaded = false;\nasync function load_plugins() {\n  await Promise.all(\n    plugins_src.map((src, i) => {\n      return new Promise((resolve) => {\n        const script = document.createElement(\"script\");\n        script.onload = resolve;\n        script.src = src;\n        document.head.appendChild(script);\n        return script;\n      });\n    })\n  );\n  loaded = true;\n}\nlet plugin_scripts = [];\nfunction handle_bokeh_loaded() {\n  plugin_scripts = load_plugins();\n}\nfunction load_bokeh() {\n  const script = document.createElement(\"script\");\n  script.onload = handle_bokeh_loaded;\n  script.src = main_src;\n  const is_bokeh_script_present = document.head.querySelector(\n    `script[src=\"${main_src}\"]`\n  );\n  if (!is_bokeh_script_present) {\n    document.head.appendChild(script);\n  } else {\n    handle_bokeh_loaded();\n  }\n  return script;\n}\nconst main_script = bokeh_version ? load_bokeh() : null;\nonDestroy(() => {\n  if (main_script in document.children) {\n    document.removeChild(main_script);\n    plugin_scripts.forEach((child) => document.removeChild(child));\n  }\n});\n</script>\n\n<div data-testid={\"bokeh\"} id={div_id} class=\"gradio-bokeh\" />\n\n<style>\n\t.gradio-bokeh {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n</style>\n"],"names":["ctx","insert","target","div","anchor","value","$$props","bokeh_version","div_id","dispatch","createEventDispatcher","embed_bokeh","_plot","load_bokeh","plotObj","p","main_src","plugins_src","loaded","load_plugins","src","i","resolve","script","$$invalidate","plugin_scripts","handle_bokeh_loaded","main_script","onDestroy","child","plot"],"mappings":"kKA0EkB,OAAO,WAAMA,EAAM,CAAA,CAAA,qDAArCC,EAA6DC,EAAAC,EAAAC,CAAA,uDAzElD,MAAAC,CAAK,EAAAC,GACL,cAAAC,CAAa,EAAAD,QAClBE,EAAM,YAAe,KAAK,OAAM,EAAG,SAAS,CAAC,EAAE,UAAU,CAAC,CAAA,GAC1DC,EAAWC,IAGF,eAAAC,EAAYC,EAAK,CAM1B,GALA,UACE,SAAS,eAAeJ,CAAM,IAChC,SAAS,eAAeA,CAAM,EAAE,UAAY,IAG5C,OAAO,MAAK,CACdK,IACI,IAAAC,EAAU,KAAK,MAAMF,CAAK,GACvB,MAAS,OAAO,MAAM,MAAM,WAAWE,EAASN,CAAM,GAC3D,OAAO,cAAeO,GAAC,CACjB,MAAAA,EAAE,MACRN,EAAS,MAAM,KAMf,MAAAO,+CAAwDT,CAAa,UACrEU,EAAW,uDACuCV,CAAa,+DACdA,CAAa,2DACjBA,CAAa,4DACZA,CAAa,WAE7D,IAAAW,EAAS,kBACEC,GAAY,OACnB,QAAQ,IACZF,EAAY,IAAG,CAAEG,EAAKC,IACT,IAAA,QAASC,GAAO,CACnB,MAAAC,EAAS,SAAS,cAAc,QAAQ,EAC9C,OAAAA,EAAO,OAASD,EAChBC,EAAO,IAAMH,EACb,SAAS,KAAK,YAAYG,CAAM,EACzBA,MAIbC,EAAA,EAAAN,EAAS,EAAI,MAEXO,EAAc,CAAA,WACTC,GAAmB,CAC1BD,EAAiBN,EAAY,WAEtBN,GAAU,CACX,MAAAU,EAAS,SAAS,cAAc,QAAQ,EAC9C,OAAAA,EAAO,OAASG,EAChBH,EAAO,IAAMP,EACmB,SAAS,KAAK,6BAC7BA,CAAQ,IAAA,EAKvBU,IAFA,SAAS,KAAK,YAAYH,CAAM,EAI3BA,EAEH,MAAAI,EAAcpB,EAAgBM,EAAU,EAAK,KACnD,OAAAe,EAAS,IAAA,CACHD,KAAe,SAAS,WAC1B,SAAS,YAAYA,CAAW,EAChCF,EAAe,QAASI,GAAU,SAAS,YAAYA,CAAK,CAAA,yHA/D9DL,EAAA,EAAAM,EAAOzB,GAAO,IAAI,iBAkBlBa,GAAUP,EAAYmB,CAAI"}