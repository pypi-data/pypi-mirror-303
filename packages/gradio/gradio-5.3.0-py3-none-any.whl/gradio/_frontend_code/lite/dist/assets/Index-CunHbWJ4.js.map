{"version":3,"file":"Index-CunHbWJ4.js","sources":["../../../uploadbutton/dist/shared/UploadButton.svelte","../../../uploadbutton/dist/Index.svelte"],"sourcesContent":["<script>import { tick, createEventDispatcher } from \"svelte\";\nimport { BaseButton } from \"@gradio/button\";\nimport { prepare_files } from \"@gradio/client\";\nexport let elem_id = \"\";\nexport let elem_classes = [];\nexport let visible = true;\nexport let label;\nexport let value;\nexport let file_count;\nexport let file_types = [];\nexport let root;\nexport let size = \"lg\";\nexport let icon = null;\nexport let scale = null;\nexport let min_width = void 0;\nexport let variant = \"secondary\";\nexport let disabled = false;\nexport let max_file_size = null;\nexport let upload;\nconst dispatch = createEventDispatcher();\nlet hidden_upload;\nlet accept_file_types;\nif (file_types == null) {\n  accept_file_types = null;\n} else {\n  file_types = file_types.map((x) => {\n    if (x.startsWith(\".\")) {\n      return x;\n    }\n    return x + \"/*\";\n  });\n  accept_file_types = file_types.join(\", \");\n}\nfunction open_file_upload() {\n  dispatch(\"click\");\n  hidden_upload.click();\n}\nasync function load_files(files) {\n  let _files = Array.from(files);\n  if (!files.length) {\n    return;\n  }\n  if (file_count === \"single\") {\n    _files = [files[0]];\n  }\n  let all_file_data = await prepare_files(_files);\n  await tick();\n  try {\n    all_file_data = (await upload(all_file_data, root, void 0, max_file_size ?? Infinity))?.filter((x) => x !== null);\n  } catch (e) {\n    dispatch(\"error\", e.message);\n    return;\n  }\n  value = file_count === \"single\" ? all_file_data?.[0] : all_file_data;\n  dispatch(\"change\", value);\n  dispatch(\"upload\", value);\n}\nasync function load_files_from_upload(e) {\n  const target = e.target;\n  if (!target.files)\n    return;\n  await load_files(target.files);\n}\nfunction clear_input_value(e) {\n  const target = e.target;\n  if (target.value)\n    target.value = \"\";\n}\n</script>\n\n<input\n\tclass=\"hide\"\n\taccept={accept_file_types}\n\ttype=\"file\"\n\tbind:this={hidden_upload}\n\ton:change={load_files_from_upload}\n\ton:click={clear_input_value}\n\tmultiple={file_count === \"multiple\" || undefined}\n\twebkitdirectory={file_count === \"directory\" || undefined}\n\tmozdirectory={file_count === \"directory\" || undefined}\n\tdata-testid=\"{label}-upload-button\"\n/>\n\n<BaseButton\n\t{size}\n\t{variant}\n\t{elem_id}\n\t{elem_classes}\n\t{visible}\n\ton:click={open_file_upload}\n\t{scale}\n\t{min_width}\n\t{disabled}\n>\n\t{#if icon}\n\t\t<img class=\"button-icon\" src={icon.url} alt={`${value} icon`} />\n\t{/if}\n\t<slot />\n</BaseButton>\n\n<style>\n\t.hide {\n\t\tdisplay: none;\n\t}\n\t.button-icon {\n\t\twidth: var(--text-xl);\n\t\theight: var(--text-xl);\n\t\tmargin-right: var(--spacing-xl);\n\t}\n</style>\n","<script context=\"module\">export { default as BaseUploadButton } from \"./shared/UploadButton.svelte\";\n</script>\n\n<script>import UploadButton from \"./shared/UploadButton.svelte\";\nexport let elem_id = \"\";\nexport let elem_classes = [];\nexport let visible = true;\nexport let label;\nexport let value;\nexport let file_count;\nexport let file_types = [];\nexport let root;\nexport let size = \"lg\";\nexport let scale = null;\nexport let icon = null;\nexport let min_width = void 0;\nexport let variant = \"secondary\";\nexport let gradio;\nexport let interactive;\n$:\n  disabled = !interactive;\nasync function handle_event(detail, event) {\n  value = detail;\n  gradio.dispatch(event);\n}\n</script>\n\n<UploadButton\n\t{elem_id}\n\t{elem_classes}\n\t{visible}\n\t{file_count}\n\t{file_types}\n\t{size}\n\t{scale}\n\t{icon}\n\t{min_width}\n\t{root}\n\t{value}\n\t{disabled}\n\t{variant}\n\t{label}\n\tmax_file_size={gradio.max_file_size}\n\ton:click={() => gradio.dispatch(\"click\")}\n\ton:change={({ detail }) => handle_event(detail, \"change\")}\n\ton:upload={({ detail }) => handle_event(detail, \"upload\")}\n\ton:error={({ detail }) => {\n\t\tgradio.dispatch(\"error\", detail);\n\t}}\n\tupload={(...args) => gradio.client.upload(...args)}\n>\n\t{label ? gradio.i18n(label) : \"\"}\n</UploadButton>\n"],"names":["src_url_equal","img","img_src_value","ctx","attr","insert","target","anchor","dirty","create_if_block","input","clear_input_value","e","elem_id","$$props","elem_classes","visible","label","value","file_count","file_types","root","size","icon","scale","min_width","variant","disabled","max_file_size","upload","dispatch","createEventDispatcher","hidden_upload","accept_file_types","x","open_file_upload","load_files","files","_files","all_file_data","prepare_files","tick","load_files_from_upload","$$value","set_data","t_value","uploadbutton_changes","gradio","interactive","handle_event","detail","event","$$invalidate","func","args","change_handler","upload_handler"],"mappings":"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"}