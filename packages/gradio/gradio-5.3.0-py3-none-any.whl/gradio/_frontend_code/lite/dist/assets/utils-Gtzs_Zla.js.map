{"version":3,"file":"utils-Gtzs_Zla.js","sources":["../../../image/dist/shared/utils.js"],"sourcesContent":["export const get_coordinates_of_clicked_image = (evt) => {\n    let image;\n    if (evt.currentTarget instanceof Element) {\n        image = evt.currentTarget.querySelector(\"img\");\n    }\n    else {\n        return [NaN, NaN];\n    }\n    const imageRect = image.getBoundingClientRect();\n    const xScale = image.naturalWidth / imageRect.width;\n    const yScale = image.naturalHeight / imageRect.height;\n    if (xScale > yScale) {\n        const displayed_height = image.naturalHeight / xScale;\n        const y_offset = (imageRect.height - displayed_height) / 2;\n        var x = Math.round((evt.clientX - imageRect.left) * xScale);\n        var y = Math.round((evt.clientY - imageRect.top - y_offset) * xScale);\n    }\n    else {\n        const displayed_width = image.naturalWidth / yScale;\n        const x_offset = (imageRect.width - displayed_width) / 2;\n        var x = Math.round((evt.clientX - imageRect.left - x_offset) * yScale);\n        var y = Math.round((evt.clientY - imageRect.top) * yScale);\n    }\n    if (x < 0 || x >= image.naturalWidth || y < 0 || y >= image.naturalHeight) {\n        return null;\n    }\n    return [x, y];\n};\n"],"names":["get_coordinates_of_clicked_image","evt","image","imageRect","xScale","yScale","displayed_height","y_offset","x","y","displayed_width","x_offset"],"mappings":"AAAY,MAACA,EAAoCC,GAAQ,CACrD,IAAIC,EACJ,GAAID,EAAI,yBAAyB,QAC7BC,EAAQD,EAAI,cAAc,cAAc,KAAK,MAG7C,OAAO,CAAC,IAAK,GAAG,EAEpB,MAAME,EAAYD,EAAM,wBAClBE,EAASF,EAAM,aAAeC,EAAU,MACxCE,EAASH,EAAM,cAAgBC,EAAU,OAC/C,GAAIC,EAASC,EAAQ,CACjB,MAAMC,EAAmBJ,EAAM,cAAgBE,EACzCG,GAAYJ,EAAU,OAASG,GAAoB,EACzD,IAAIE,EAAI,KAAK,OAAOP,EAAI,QAAUE,EAAU,MAAQC,CAAM,EACtDK,EAAI,KAAK,OAAOR,EAAI,QAAUE,EAAU,IAAMI,GAAYH,CAAM,CACvE,KACI,CACD,MAAMM,EAAkBR,EAAM,aAAeG,EACvCM,GAAYR,EAAU,MAAQO,GAAmB,EACvD,IAAIF,EAAI,KAAK,OAAOP,EAAI,QAAUE,EAAU,KAAOQ,GAAYN,CAAM,EACjEI,EAAI,KAAK,OAAOR,EAAI,QAAUE,EAAU,KAAOE,CAAM,CAC5D,CACD,OAAIG,EAAI,GAAKA,GAAKN,EAAM,cAAgBO,EAAI,GAAKA,GAAKP,EAAM,cACjD,KAEJ,CAACM,EAAGC,CAAC,CAChB"}